import{y as ce,r as y,l as pe,ad as me,a5 as ye,t as fe,ah as te,ai as ke,m as V,c as r,a as t,I as q,e as k,M as b,a7 as x,b as ae,N as C,S as D,U as P,O as o,d as v,L as ge,V as h,o as n}from"./index-CMVsiJL9.js";import{I as be}from"./icon-plus-BXC3-OCg.js";import{I as le}from"./icon-x-C5nNggym.js";import{I as Ie}from"./icon-eye-BvtisNYH.js";const he={class:"panel"},xe={class:"flex flex-col md:flex-row items-center justify-between mb-5"},we={class:"mt-2 md:mt-0"},je={class:"mb-5 grid grid-cols-1 sm:grid-cols-4 gap-4"},De=["value"],Pe={key:0,class:"bg-red-100 border border-red-200 text-red-600 px-4 py-3 rounded mb-5"},We={class:"flex items-center"},Se={class:"table-responsive"},Te={class:"flex justify-between items-center mb-4"},He={class:"flex items-center"},Ne={key:0,class:"text-gray-500 ml-2"},Me={key:1,class:"text-gray-500 ml-2"},ze={class:"table-striped"},_e={key:0},Ae={key:1},Ve={class:"flex flex-col gap-1"},Ce={key:0},qe={class:"flex gap-2"},Be=["onClick"],Le={class:"flex items-center justify-between mt-5"},Ue={class:"flex items-center gap-2"},Ye={class:"flex items-center gap-2"},Ke=["disabled"],Ee=["disabled"],$e={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},Ge={class:"panel bg-white dark:bg-gray-800 w-full max-w-lg"},Re={class:"flex items-center justify-between mb-5"},Fe={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Je={class:"mb-4"},Ze=["value"],Oe={key:0,class:"text-red-500 text-xs mt-1"},Xe={class:"mb-4"},Qe={key:0,class:"text-red-500 text-xs mt-1"},et={class:"mb-4"},tt={key:0,class:"text-red-500 text-xs mt-1"},at={class:"mb-4"},lt=["value"],st={key:0,class:"text-red-500 text-xs mt-1"},ot={class:"mb-4"},rt={key:0,class:"text-red-500 text-xs mt-1"},nt={class:"mb-4"},ut=["disabled"],it=["value"],dt={key:0,class:"text-red-500 text-xs mt-1"},vt={key:1,class:"text-xs text-gray-500 mt-1"},ct={key:2,class:"font-semibold text-primary mt-1"},pt={key:0,class:"mb-4"},mt=["value","disabled"],yt={key:0,class:"text-red-500 text-xs mt-1"},ft={key:1,class:"mb-4"},kt=["value"],gt={key:0,class:"text-red-500 text-xs mt-1"},bt={class:"mb-4 sm:col-span-2"},It={class:"flex justify-end gap-4"},ht=["disabled"],xt={key:1,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},wt={class:"panel bg-white dark:bg-gray-800 w-full max-w-lg"},jt={class:"flex items-center justify-between mb-5"},Dt={key:0,class:"space-y-4"},Pt={class:"grid grid-cols-2 gap-4"},Wt={key:0},St={key:1},Tt={class:"col-span-2"},Vt=ce({__name:"list",setup(Ht){const W=y(!1),B=y(!1),L=y(!1),U=y(!1),S=y([]),c=y([]),T=y([]),H=y([]),p=y(null),f=y(""),$=y(0),m=y({type:"",startDate:"",endDate:"",warehouseId:""}),s=y({type:"in",date:new Date().toISOString().slice(0,16),productId:"",quantity:0,sourceWarehouseId:"",targetWarehouseId:"",sourceProjectId:"",targetProjectId:"",description:""}),u=y({}),_=y(10),N=y(1),M=y(null),z=pe(),j=me(),Y=ye();fe(async()=>{f.value="",W.value=!0,M.value=Y.activeProjectId;const a=e=>{console.log("Stok Hareketleri sayfası: Proje değişikliği algılandı:",e),M.value=e,K()};te.on("project-changed",a),ke(()=>{te.off("project-changed",a)});try{j.isInitialized||(console.log("Veri deposu başlatılıyor..."),await j.initializeStore(),console.log("Veri deposu başlatıldı")),await Promise.all([G(),R(),se()]),await K()}catch(e){console.error("Veriler yüklenirken hata oluştu:",e),f.value="Veriler yüklenirken bir hata oluştu: "+(e instanceof Error?e.message:String(e))}finally{setTimeout(()=>{W.value=!1},300)}});const K=async()=>{W.value=!0,f.value="";try{const a=j.getMovements;c.value.length===0&&await G(),T.value.length===0&&await R(),S.value=a.map(e=>{const i=T.value.find(g=>g.id===e.productId)||{id:e.productId||"",code:"",name:"Tanımsız",unit:"adet",minStockLevel:0},d=c.value.find(g=>g.id===e.sourceWarehouseId)||{id:e.sourceWarehouseId||"",code:"",name:"Tanımsız",address:"",manager:"",isActive:!0};let l;return(e.type==="transfer"||e.type==="stock_add")&&e.targetWarehouseId&&(l=c.value.find(g=>g.id===e.targetWarehouseId)||{id:e.targetWarehouseId||"",code:"",name:"Tanımsız Depo",address:null,manager:null,isActive:!0}),{...e,date:e.date?new Date(e.date):new Date,product:i,sourceWarehouse:d,targetWarehouse:l,description:e.description||""}}),$.value=S.value.length}catch(a){console.error("Hareketler yüklenirken hata oluştu:",a),f.value="Hareketler yüklenirken bir hata oluştu. Lütfen sayfayı yenileyip tekrar deneyin."}finally{W.value=!1}},G=async()=>{try{const a=j.getWarehouses||[];c.value=a.filter(e=>e.isActive!==!1).map(e=>({id:e.id||"",code:e.code||"",name:e.name||"Tanımsız Depo",address:e.address||"",manager:e.manager||"",isActive:!0})),c.value.length===0&&console.warn("Aktif depo bulunamadı!")}catch(a){console.error("Depolar yüklenirken hata oluştu:",a),f.value="Depolar yüklenirken hata oluştu. Lütfen sayfayı yenileyip tekrar deneyin."}},R=async()=>{try{const a=j.getProducts||[];T.value=a.map(e=>({id:e.id||"",code:e.code||"",name:e.name||"Tanımsız Ürün",unit:e.unit||"adet",minStockLevel:e.minStockLevel||0})),T.value.length===0&&console.warn("Hiç ürün bulunamadı!")}catch(a){console.error("Ürünler yüklenirken hata oluştu:",a),f.value="Ürünler yüklenirken hata oluştu. Lütfen sayfayı yenileyip tekrar deneyin."}},se=async()=>{try{await Y.loadUserProjects(),H.value=Y.projects.map(a=>({id:a.id,name:a.name})),H.value.length===0?console.warn("Hiç proje bulunamadı!"):console.log(`${H.value.length} proje yüklendi`)}catch(a){console.error("Projeler yüklenirken hata oluştu:",a),f.value="Projeler yüklenirken hata oluştu. Lütfen sayfayı yenileyip tekrar deneyin."}},F=a=>{if(!a)return"-";try{const e=typeof a=="string"?new Date(a):a;return isNaN(e.getTime())?(console.error("Geçersiz tarih formatı:",a),"-"):new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(e)}catch(e){return console.error("Tarih biçimlendirme hatası:",e,a),"-"}},oe=()=>{s.value={type:"in",date:new Date().toISOString().slice(0,16),productId:"",quantity:0,sourceWarehouseId:"",targetWarehouseId:"",sourceProjectId:"",targetProjectId:"",description:""},u.value={},L.value=!0,Q()},E=()=>{L.value=!1},re=a=>{p.value=a,U.value=!0},J=()=>{U.value=!1,p.value=null},Z=V(()=>{if(!S.value||S.value.length===0)return[];try{let a=[...S.value].sort((e,i)=>{const d=new Date(e.date).getTime();return new Date(i.date).getTime()-d});if(M.value!==null&&(console.log("Computed - Aktif proje ID:",M.value),a=a.filter(e=>e.sourceProjectId===M.value||e.targetProjectId===M.value),console.log("Computed - filtreleme sonrası:",a.length)),!z.isAdmin){const e=z.getAuthorizedDepot;if(!e)return console.warn("Kullanıcı için depo yetkisi bulunamadı"),[];const i=c.value.find(d=>d.code===e);if(i)a=a.filter(d=>d.sourceWarehouseId===i.id||d.targetWarehouseId===i.id);else return console.warn("Yetkilendirilen depo bulunamadı:",e),[]}if(m.value.type&&(a=a.filter(e=>e.type===m.value.type)),m.value.startDate)try{const e=new Date(m.value.startDate);isNaN(e.getTime())||(e.setHours(0,0,0,0),a=a.filter(i=>{const d=new Date(i.date);return!isNaN(d.getTime())&&d>=e}))}catch(e){console.error("Başlangıç tarihi filtreleme hatası:",e)}if(m.value.endDate)try{const e=new Date(m.value.endDate);isNaN(e.getTime())||(e.setHours(23,59,59,999),a=a.filter(i=>{const d=new Date(i.date);return!isNaN(d.getTime())&&d<=e}))}catch(e){console.error("Bitiş tarihi filtreleme hatası:",e)}return m.value.warehouseId&&(a=a.filter(e=>e.sourceWarehouseId===m.value.warehouseId||e.targetWarehouseId===m.value.warehouseId)),a}catch(a){return console.error("Filtreleme sırasında hata oluştu:",a),[]}}),O=V(()=>Math.max(1,Math.ceil(Z.value.length/_.value))),ne=V(()=>{const a=(N.value-1)*_.value,e=a+_.value;return Z.value.slice(a,e)}),ue=()=>{u.value={};let a=!0;return s.value.type||(u.value.type="Hareket türü seçmelisiniz",a=!1),s.value.date?new Date(s.value.date)>new Date&&(u.value.date="İleri tarihli hareket giremezsiniz",a=!1):(u.value.date="Tarih girilmelidir",a=!1),s.value.sourceProjectId||(u.value.sourceProjectId="Proje seçmelisiniz",a=!1),s.value.productId||(u.value.productId="Ürün seçmelisiniz",a=!1),(!s.value.quantity||s.value.quantity<=0)&&(u.value.quantity="Miktar 0'dan büyük olmalıdır",a=!1),s.value.sourceWarehouseId||(u.value.sourceWarehouseId="Kaynak depo seçmelisiniz",a=!1),(s.value.type==="transfer"||s.value.type==="stock_add")&&(s.value.targetWarehouseId?s.value.targetWarehouseId===s.value.sourceWarehouseId&&(u.value.targetWarehouseId="Hedef depo, kaynak depodan farklı olmalıdır",a=!1):(u.value.targetWarehouseId="Hedef depo seçmelisiniz",a=!1)),a},ie=a=>{var e,i,d,l,g;return a.type==="in"?((e=a.sourceWarehouse)==null?void 0:e.name)||"":a.type==="out"?((i=a.sourceWarehouse)==null?void 0:i.name)||"":a.type==="transfer"?`${((d=a.sourceWarehouse)==null?void 0:d.name)||""} -> ${((l=a.targetWarehouse)==null?void 0:l.name)||""}`:a.type==="stock_add"?`Test Depo -> ${((g=a.targetWarehouse)==null?void 0:g.name)||"-"}`:""},de=async()=>{if(ue()){B.value=!0,f.value="";try{let a=new Date;if(s.value.date)try{if(a=new Date(s.value.date),isNaN(a.getTime()))throw new Error("Geçersiz tarih formatı")}catch(I){console.error("Tarih dönüştürme hatası:",I),a=new Date}const e=Number(s.value.quantity);if(isNaN(e)||e<=0)throw new Error("Miktar sayısal ve sıfırdan büyük olmalıdır");if(!T.value.find(I=>I.id===s.value.productId))throw new Error("Seçilen ürün bulunamadı");if(!c.value.find(I=>I.id===s.value.sourceWarehouseId))throw new Error("Kaynak depo bulunamadı");let l;if(s.value.type==="transfer"&&(l=c.value.find(I=>I.id===s.value.targetWarehouseId),!l))throw new Error("Hedef depo bulunamadı");const g=`HRK${String(j.getMovements.length+1).padStart(4,"0")}`;console.log(`Yeni hareket numarası oluşturuluyor: ${g}`);const w={id:`HRK-${Math.random().toString(36).substr(2,9)}`,date:a.toISOString(),movementNumber:g,type:s.value.type,productId:s.value.productId,quantity:e,sourceWarehouseId:s.value.sourceWarehouseId,description:s.value.description||"",sourceProjectId:s.value.sourceProjectId||"ApMkLHJ3Rk7BpmYuNm5Z"};(s.value.type==="transfer"||s.value.type==="stock_add")&&(w.targetWarehouseId=s.value.targetWarehouseId),s.value.type==="transfer"&&s.value.targetProjectId?w.targetProjectId=s.value.targetProjectId:s.value.type==="transfer"&&(w.targetProjectId=s.value.sourceProjectId||"ApMkLHJ3Rk7BpmYuNm5Z"),console.log("Hareket verisi Firestore'a gönderiliyor:",w),await j.addMovement(w),await K(),E()}catch(a){console.error("Hareket kaydedilirken hata oluştu:",a),a instanceof Error?a.message.includes("INSUFFICIENT_STOCK")?f.value="Yeterli stok bulunmuyor. Lütfen stok miktarını kontrol ediniz.":f.value=`Hareket kaydedilirken hata: ${a.message}`:f.value="Hareket kaydedilirken beklenmeyen bir hata oluştu"}finally{B.value=!1}}},X=a=>{switch(a){case"in":return"Giriş";case"out":return"Çıkış";case"transfer":return"Transfer";case"stock_add":return"Stok Ekleme";default:return a}},A=a=>{if(!a)return"Atanmamış";if(a==="ApMkLHJ3Rk7BpmYuNm5Z")return"KGYS";const e=H.value.find(i=>i.id===a);return e?e.name:"Bilinmeyen Proje"};V(()=>{if(z.isAdmin)return!0;const a=c.value.find(e=>e.code===z.getAuthorizedDepot);return a&&s.value.sourceWarehouseId===a.id});const ve=V(()=>{if(z.isAdmin)return c.value;const a=z.getAuthorizedDepot;return c.value.filter(e=>e.code===a)}),Q=()=>{if(s.value.targetWarehouseId="",s.value.type!=="transfer"&&(s.value.targetProjectId=""),s.value.type==="stock_add"){let a=c.value.find(e=>e.code==="DEP001");a||(a=c.value.find(e=>e.name&&e.name.toLowerCase().includes("test")||e.code&&e.code.toLowerCase().includes("test"))),!a&&c.value.length>0&&(a=c.value[0],console.log("Test Depo bulunamadı. İlk depo kullanılıyor:",a.name)),a?(s.value.sourceWarehouseId=a.id,console.log("Stok ekleme için kaynak depo olarak kullanılıyor:",a.name),f.value=""):(console.error("Hiçbir aktif depo bulunamadı!"),f.value="Stok ekleme için kullanılacak bir depo bulunamadı. Lütfen önce depo ekleyin.")}};return(a,e)=>{var i,d;return n(),r("div",null,[t("div",he,[t("div",xe,[e[17]||(e[17]=t("h5",{class:"font-semibold text-lg dark:text-white-light"},"Stok Hareketleri",-1)),t("div",we,[t("button",{type:"button",class:"btn btn-primary",onClick:oe},[q(be,{class:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),e[16]||(e[16]=k(" Yeni Hareket "))])])]),t("div",je,[t("div",null,[e[19]||(e[19]=t("label",null,"Hareket Tipi",-1)),e[20]||(e[20]=k()),b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>m.value.type=l),class:"form-select"},e[18]||(e[18]=[ae('<option value="">Tümü</option><option value="in">Giriş</option><option value="out">Çıkış</option><option value="transfer">Transfer</option><option value="stock_add">Stok Ekleme</option>',5)]),512),[[x,m.value.type]])]),t("div",null,[e[21]||(e[21]=t("label",null,"Başlangıç Tarihi",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=l=>m.value.startDate=l),class:"form-input"},null,512),[[C,m.value.startDate]])]),t("div",null,[e[22]||(e[22]=t("label",null,"Bitiş Tarihi",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=l=>m.value.endDate=l),class:"form-input"},null,512),[[C,m.value.endDate]])]),t("div",null,[e[24]||(e[24]=t("label",null,"Depo",-1)),b(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>m.value.warehouseId=l),class:"form-select"},[e[23]||(e[23]=t("option",{value:""},"Tümü",-1)),(n(!0),r(D,null,P(c.value,l=>(n(),r("option",{key:l.id,value:l.id},o(l.name),9,De))),128))],512),[[x,m.value.warehouseId]])])]),f.value?(n(),r("div",Pe,[t("div",We,[e[25]||(e[25]=ae('<span class="mr-2"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg></span>',1)),k(" "+o(f.value),1)])])):v("",!0),t("div",Se,[t("div",Te,[t("div",He,[W.value?(n(),r("span",Ne,"Yükleniyor...")):(n(),r("span",Me,"Toplam "+o($.value)+" kayıt",1))])]),t("table",ze,[e[28]||(e[28]=t("thead",null,[t("tr",null,[t("th",null,"Hareket No"),t("th",null,"Tarih"),t("th",null,"Proje"),t("th",null,"Ürün"),t("th",null,"Miktar"),t("th",null,"Kaynak Depo"),t("th",null,"Hedef Depo"),t("th",null,"İşlemler")])],-1)),t("tbody",null,[W.value?(n(),r("tr",_e,e[26]||(e[26]=[t("td",{colspan:"8",class:"text-center"},[t("div",{class:"flex justify-center items-center p-4"},[t("div",{class:"animate-spin rounded-full h-6 w-6 border-2 border-primary border-l-transparent"})])],-1)]))):S.value.length===0?(n(),r("tr",Ae,e[27]||(e[27]=[t("td",{colspan:"8",class:"text-center"},"Henüz stok hareketi bulunmamaktadır.",-1)]))):v("",!0),(n(!0),r(D,null,P(ne.value,l=>{var g,w,I,ee;return n(),r("tr",{key:l.id},[t("td",null,o(l.movementNumber),1),t("td",null,o(F(l.date)),1),t("td",null,[t("div",Ve,[t("span",{class:h({"badge badge-outline-info":l.sourceProjectId&&l.sourceProjectId!=="ApMkLHJ3Rk7BpmYuNm5Z","badge badge-outline-success":l.sourceProjectId==="ApMkLHJ3Rk7BpmYuNm5Z"})},[k(o(l.sourceProjectId==="ApMkLHJ3Rk7BpmYuNm5Z"?"KGYS":A(l.sourceProjectId))+" ",1),l.type==="transfer"&&l.targetProjectId&&l.targetProjectId!==l.sourceProjectId?(n(),r("span",Ce," → "+o(l.targetProjectId==="ApMkLHJ3Rk7BpmYuNm5Z"?"KGYS":A(l.targetProjectId)),1)):v("",!0)],2),t("span",{class:h(["badge",{"badge-success":l.type==="in","badge-danger":l.type==="out","badge-info":l.type==="transfer","badge-warning":l.type==="stock_add"}])},o(X(l.type)),3)])]),t("td",null,o((g=l.product)==null?void 0:g.code)+" - "+o((w=l.product)==null?void 0:w.name),1),t("td",null,o(l.quantity)+" "+o((I=l.product)==null?void 0:I.unit),1),t("td",null,o(l.sourceWarehouse.name),1),t("td",null,o(((ee=l.targetWarehouse)==null?void 0:ee.name)||"-"),1),t("td",null,[t("div",qe,[t("button",{class:"btn btn-sm btn-outline-info",onClick:Nt=>re(l)},[q(Ie,{class:"w-4.5 h-4.5"})],8,Be)])])])}),128))])])]),t("div",Le,[t("div",Ue,[b(t("select",{class:"form-select w-20","onUpdate:modelValue":e[4]||(e[4]=l=>_.value=l)},e[29]||(e[29]=[t("option",null,"10",-1),t("option",null,"20",-1),t("option",null,"50",-1),t("option",null,"100",-1)]),512),[[x,_.value]]),e[30]||(e[30]=t("span",null,"kayıt gösteriliyor",-1))]),t("div",Ye,[t("button",{class:"btn btn-outline-primary p-2",disabled:N.value===1,onClick:e[5]||(e[5]=l=>N.value--)}," ← ",8,Ke),t("span",null,"Sayfa "+o(N.value)+" / "+o(O.value),1),t("button",{class:"btn btn-outline-primary p-2",disabled:N.value===O.value,onClick:e[6]||(e[6]=l=>N.value++)}," → ",8,Ee)])])]),L.value?(n(),r("div",$e,[t("div",Ge,[t("div",Re,[e[31]||(e[31]=t("h5",{class:"font-semibold text-lg"},"Yeni Stok Hareketi",-1)),t("button",{class:"text-gray-400 hover:text-gray-800",onClick:E},[q(le,{class:"w-5 h-5"})])]),t("form",{onSubmit:ge(de,["prevent"])},[t("div",Fe,[t("div",Je,[e[33]||(e[33]=t("label",null,[k("Proje "),t("span",{class:"text-red-500"},"*")],-1)),b(t("select",{class:h(["form-select",{"border-red-500":u.value.sourceProjectId}]),"onUpdate:modelValue":e[7]||(e[7]=l=>s.value.sourceProjectId=l),required:""},[e[32]||(e[32]=t("option",{value:""},"Proje Seçin",-1)),(n(!0),r(D,null,P(H.value,l=>(n(),r("option",{key:l.id,value:l.id},o(l.name),9,Ze))),128))],2),[[x,s.value.sourceProjectId]]),u.value.sourceProjectId?(n(),r("p",Oe,o(u.value.sourceProjectId),1)):v("",!0)]),t("div",Xe,[e[35]||(e[35]=t("label",null,[k("Hareket Türü "),t("span",{class:"text-red-500"},"*")],-1)),b(t("select",{class:h(["form-select",{"border-red-500":u.value.type}]),"onUpdate:modelValue":e[8]||(e[8]=l=>s.value.type=l),required:"",onChange:Q},e[34]||(e[34]=[t("option",{value:"in"},"Stok Girişi",-1),t("option",{value:"out"},"Stok Çıkışı",-1),t("option",{value:"transfer"},"Transfer",-1),t("option",{value:"stock_add"},"Stok Ekleme",-1)]),34),[[x,s.value.type]]),u.value.type?(n(),r("p",Qe,o(u.value.type),1)):v("",!0)]),t("div",et,[e[36]||(e[36]=t("label",null,[k("Tarih "),t("span",{class:"text-red-500"},"*")],-1)),b(t("input",{type:"datetime-local",class:h(["form-input",{"border-red-500":u.value.date}]),"onUpdate:modelValue":e[9]||(e[9]=l=>s.value.date=l),required:""},null,2),[[C,s.value.date]]),u.value.date?(n(),r("p",tt,o(u.value.date),1)):v("",!0)]),t("div",at,[e[38]||(e[38]=t("label",null,[k("Ürün "),t("span",{class:"text-red-500"},"*")],-1)),b(t("select",{class:h(["form-select",{"border-red-500":u.value.productId}]),"onUpdate:modelValue":e[10]||(e[10]=l=>s.value.productId=l),required:""},[e[37]||(e[37]=t("option",{value:""},"Ürün Seçiniz",-1)),(n(!0),r(D,null,P(T.value,l=>(n(),r("option",{key:l.id,value:l.id},o(l.code)+" - "+o(l.name),9,lt))),128))],2),[[x,s.value.productId]]),u.value.productId?(n(),r("p",st,o(u.value.productId),1)):v("",!0)]),t("div",ot,[e[39]||(e[39]=t("label",null,[k("Miktar "),t("span",{class:"text-red-500"},"*")],-1)),b(t("input",{type:"number",class:h(["form-input",{"border-red-500":u.value.quantity}]),"onUpdate:modelValue":e[11]||(e[11]=l=>s.value.quantity=l),min:"0.01",step:"0.01",required:""},null,2),[[C,s.value.quantity]]),u.value.quantity?(n(),r("p",rt,o(u.value.quantity),1)):v("",!0)]),e[49]||(e[49]=k()),t("div",nt,[t("label",null,[k(o(s.value.type==="out"||s.value.type==="transfer"||s.value.type==="stock_add"?"Kaynak Depo":"Depo")+" ",1),e[40]||(e[40]=t("span",{class:"text-red-500"},"*",-1))]),b(t("select",{class:h(["form-select",{"border-red-500":u.value.sourceWarehouseId}]),"onUpdate:modelValue":e[12]||(e[12]=l=>s.value.sourceWarehouseId=l),required:"",disabled:s.value.type==="stock_add"},[e[41]||(e[41]=t("option",{value:""},"Depo Seçiniz",-1)),(n(!0),r(D,null,P(ve.value,l=>(n(),r("option",{key:l.id,value:l.id},o(l.code)+" - "+o(l.name),9,it))),128))],10,ut),[[x,s.value.sourceWarehouseId]]),e[42]||(e[42]=k()),u.value.sourceWarehouseId?(n(),r("p",dt,o(u.value.sourceWarehouseId),1)):v("",!0),s.value.type==="stock_add"?(n(),r("p",vt,"Stok ekleme işleminde kaynak depo sabit olarak kullanılır")):v("",!0),s.value.type==="stock_add"?(n(),r("p",ct,"(Test Depo)")):v("",!0)]),e[50]||(e[50]=k()),s.value.type==="transfer"||s.value.type==="stock_add"?(n(),r("div",pt,[e[44]||(e[44]=t("label",null,[k("Hedef Depo "),t("span",{class:"text-red-500"},"*")],-1)),b(t("select",{class:h(["form-select",{"border-red-500":u.value.targetWarehouseId}]),"onUpdate:modelValue":e[13]||(e[13]=l=>s.value.targetWarehouseId=l),required:""},[e[43]||(e[43]=t("option",{value:""},"Depo Seçiniz",-1)),(n(!0),r(D,null,P(c.value,l=>(n(),r("option",{key:l.id,value:l.id,disabled:l.id===s.value.sourceWarehouseId},o(l.code)+" - "+o(l.name),9,mt))),128))],2),[[x,s.value.targetWarehouseId]]),u.value.targetWarehouseId?(n(),r("p",yt,o(u.value.targetWarehouseId),1)):v("",!0)])):v("",!0),s.value.type==="transfer"?(n(),r("div",ft,[e[46]||(e[46]=t("label",null,"Hedef Proje",-1)),b(t("select",{class:h(["form-select",{"border-red-500":u.value.targetProjectId}]),"onUpdate:modelValue":e[14]||(e[14]=l=>s.value.targetProjectId=l)},[e[45]||(e[45]=t("option",{value:""},"Aynı Proje",-1)),(n(!0),r(D,null,P(H.value,l=>(n(),r("option",{key:l.id,value:l.id},o(l.name),9,kt))),128))],2),[[x,s.value.targetProjectId]]),u.value.targetProjectId?(n(),r("p",gt,o(u.value.targetProjectId),1)):v("",!0),e[47]||(e[47]=t("p",{class:"text-xs text-gray-500 mt-1"},"Boş bırakırsanız, kaynak projeyle aynı olacaktır",-1))])):v("",!0),t("div",bt,[e[48]||(e[48]=t("label",null,"Açıklama",-1)),b(t("textarea",{class:"form-textarea",rows:"3","onUpdate:modelValue":e[15]||(e[15]=l=>s.value.description=l)},null,512),[[C,s.value.description]])])]),t("div",It,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:E}," İptal "),t("button",{type:"submit",class:"btn btn-primary",disabled:B.value}," Kaydet ",8,ht)])],32)])])):v("",!0),U.value?(n(),r("div",xt,[t("div",wt,[t("div",jt,[e[51]||(e[51]=t("h5",{class:"font-semibold text-lg"},"Hareket Detayı",-1)),t("button",{class:"text-gray-400 hover:text-gray-800",onClick:J},[q(le,{class:"w-5 h-5"})])]),p.value?(n(),r("div",Dt,[t("div",Pt,[t("div",null,[e[52]||(e[52]=t("label",{class:"font-semibold"},"Hareket No:",-1)),t("p",null,o(p.value.movementNumber),1)]),t("div",null,[e[53]||(e[53]=t("label",{class:"font-semibold"},"Tarih:",-1)),t("p",null,o(F(p.value.date)),1)]),e[60]||(e[60]=k()),t("div",null,[e[54]||(e[54]=t("label",{class:"font-semibold"},"Hareket Türü:",-1)),t("p",null,o(X(p.value.type)),1)]),t("div",null,[e[55]||(e[55]=t("label",{class:"font-semibold"},"Proje:",-1)),p.value.type==="transfer"&&p.value.sourceProjectId!==p.value.targetProjectId?(n(),r("p",Wt,o(A(p.value.sourceProjectId))+" → "+o(A(p.value.targetProjectId)),1)):(n(),r("p",St,o(A(p.value.sourceProjectId)),1))]),t("div",null,[e[56]||(e[56]=t("label",{class:"font-semibold"},"Ürün:",-1)),t("p",null,o((i=p.value.product)==null?void 0:i.name),1)]),t("div",null,[e[57]||(e[57]=t("label",{class:"font-semibold"},"Miktar:",-1)),t("p",null,o(p.value.quantity)+" "+o((d=p.value.product)==null?void 0:d.unit),1)]),t("div",null,[e[58]||(e[58]=t("label",{class:"font-semibold"},"Depo:",-1)),t("p",null,o(ie(p.value)),1)]),t("div",Tt,[e[59]||(e[59]=t("label",{class:"font-semibold"},"Açıklama:",-1)),t("p",null,o(p.value.description||"-"),1)])])])):v("",!0),t("div",{class:"flex justify-end mt-6"},[t("button",{class:"btn btn-outline-primary",onClick:J}," Kapat ")])])])):v("",!0)])}}});export{Vt as default};
