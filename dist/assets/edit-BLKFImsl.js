import{y as M,ad as E,r as m,t as D,c as o,a as t,I as j,J as F,M as n,N as p,e as b,V as y,O as c,d as v,a7 as I,S as T,U as h,b as G,P as V,L as H,R as O,ak as J,Q,o as r}from"./index-CMVsiJL9.js";const Z={class:"flex justify-between mb-5 items-center"},W={key:0,class:"panel"},X={key:1,class:"panel"},Y={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},$={class:"mb-4"},_={class:"mb-4"},ee={class:"mb-4"},te={key:0,class:"text-red-500 text-xs mt-1"},ae={class:"mb-4"},le=["value"],se={key:0,class:"text-red-500 text-xs mt-1"},ie={class:"mb-4"},oe=["disabled"],re=["value"],ne={key:0,class:"text-red-500 text-xs mt-1"},ue={class:"mb-4"},de={key:0,class:"text-red-500 text-xs mt-1"},me={class:"mb-4"},ve={class:"mb-4"},pe={class:"mb-4"},ce={class:"flex items-center"},be={key:0,class:"mb-4"},ke={class:"flex items-center"},ye={key:1,class:"mb-4"},fe={class:"mb-4 flex items-center"},ge={class:"inline-flex"},xe={class:"mb-4 sm:col-span-2"},Se={class:"flex justify-end gap-4 mt-6"},Ne=["disabled"],Ce={key:0,class:"animate-spin mr-2"},ze={class:"flex items-center gap-2"},Ve=M({__name:"edit",setup(Ae){const f={ekinoks:["Hareketli Kamera","Sabit Kamera","Balistik Kamera","Akıllı Hareketli","Akıllı Sabit"],geko:["Geko","Geko+","Mobil PTS"],kayitcihazi:["NIR 54TB","NIR 96TB","CIR 96TB","CIR 216TB","NVR 64TB","NVR 96 TB","NAR 64 TB","NAR 96 TB"],ethernet:["C Tipi Ethernet Anahtar","B Tipi Ethernet Anahtar","A Tipi Ethernet Anahtar"]},S=O(),P=J(),N=E(),C=m(!1),g=m(!1),i=m({}),x=m(null),u=m([]),d=m({show:!1,message:"",type:"info"}),a=m({id:"",code:"",name:"",categoryId:"",subCategory:"",unit:"adet",stockNumber:"",minStockLevel:0,totalStock:0,description:"",isActive:!0,hasSerialization:!1,requireSerialNumber:!1,serialNumberPrefix:""}),w=m(N.getCategories),z=()=>{const s=w.value.find(e=>e.id===a.value.categoryId);if(s){const e=s.name.toLowerCase();e.includes("ekinoks")?u.value=f.ekinoks:e.includes("geko")?u.value=f.geko:e.includes("kayıt")||e.includes("kayit")?u.value=f.kayitcihazi:e.includes("ethernet")?u.value=f.ethernet:u.value=[],a.value.subCategory&&!u.value.includes(a.value.subCategory)&&(a.value.subCategory="")}else u.value=[],a.value.subCategory="";console.log("Kategori değişti:",s==null?void 0:s.name,"Alt kategoriler:",u.value)},B=async s=>{C.value=!0;try{const e=N.getProducts.find(A=>A.id===s);if(!e){k("Ürün bulunamadı. Ürün listesine yönlendiriliyorsunuz.","error"),setTimeout(()=>{S.push("/inventory/products")},2e3);return}a.value={id:e.id,code:e.code,name:e.name,categoryId:e.categoryId,unit:e.unit,subCategory:e.subCategory||"",stockNumber:e.stockNumber||"",minStockLevel:e.minStockLevel,totalStock:e.totalStock||0,description:e.description||"",isActive:e.isActive,hasSerialization:e.hasSerialization||!1,requireSerialNumber:e.requireSerialNumber||!1,serialNumberPrefix:e.serialNumberPrefix||""},z(),x.value={...a.value}}catch(e){console.error("Ürün yüklenirken hata oluştu:",e),k("Ürün bilgileri yüklenirken bir hata oluştu","error")}finally{C.value=!1}},U=()=>{i.value={};let s=!0;return a.value.name.trim()||(i.value.name="Ürün adı zorunludur",s=!1),a.value.categoryId||(i.value.categoryId="Kategori seçmelisiniz",s=!1),a.value.categoryId&&u.value.length>0&&!a.value.subCategory&&(i.value.subCategory="Alt kategori seçmelisiniz",s=!1),a.value.unit||(i.value.unit="Birim seçmelisiniz",s=!1),s},K=()=>{x.value&&(a.value={...x.value},z()),i.value={},k("Form orijinal değerlere sıfırlandı","info")},k=(s,e="info")=>{d.value={show:!0,message:s,type:e},setTimeout(()=>{d.value.show=!1},3e3)},L=()=>{d.value.show=!1},R=async()=>{if(U()){g.value=!0;try{const s={code:a.value.code,name:a.value.name,categoryId:a.value.categoryId,subCategory:a.value.subCategory,unit:a.value.unit,stockNumber:a.value.stockNumber,minStockLevel:a.value.minStockLevel,description:a.value.description,isActive:a.value.isActive,hasSerialization:a.value.hasSerialization,requireSerialNumber:a.value.requireSerialNumber,serialNumberPrefix:a.value.serialNumberPrefix};await N.updateProduct(a.value.id,s),k("Ürün başarıyla güncellendi","success"),x.value={...a.value},setTimeout(()=>{S.push("/inventory/products")},1500)}catch(s){console.error("Ürün güncellenirken hata oluştu:",s),k("Ürün güncellenirken bir hata oluştu","error")}finally{g.value=!1}}};return D(()=>{const s=P.params.id;s?B(s):S.push("/inventory/products")}),(s,e)=>{const A=Q("router-link");return r(),o("div",null,[t("div",Z,[e[14]||(e[14]=t("h5",{class:"font-semibold text-lg dark:text-white-light"},"Ürün Düzenle",-1)),j(A,{to:"/inventory/products",class:"btn btn-outline-primary"},{default:F(()=>e[13]||(e[13]=[t("span",{class:"flex items-center"},[t("i",{class:"las la-arrow-left mr-1"}),b(" Geri Dön ")],-1)])),_:1})]),C.value?(r(),o("div",W,e[15]||(e[15]=[t("div",{class:"flex justify-center items-center p-8"},[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})],-1)]))):(r(),o("div",X,[t("form",{class:"space-y-5",onSubmit:H(R,["prevent"])},[t("div",Y,[t("div",$,[e[16]||(e[16]=t("label",{for:"productCode"},"Ürün Kodu",-1)),n(t("input",{id:"productCode",type:"text",class:"form-input bg-gray-100","onUpdate:modelValue":e[0]||(e[0]=l=>a.value.code=l),disabled:""},null,512),[[p,a.value.code]]),e[17]||(e[17]=t("p",{class:"text-xs text-gray-500 mt-1"},"Ürün kodu değiştirilemez",-1))]),t("div",_,[e[18]||(e[18]=t("label",{for:"stockNumber"},"Stok Numarası",-1)),n(t("input",{id:"stockNumber",type:"text",class:"form-input","onUpdate:modelValue":e[1]||(e[1]=l=>a.value.stockNumber=l),placeholder:"Stok numarası giriniz"},null,512),[[p,a.value.stockNumber]])]),t("div",ee,[e[19]||(e[19]=t("label",{for:"productName"},[b("Ürün Adı "),t("span",{class:"text-red-500"},"*")],-1)),n(t("input",{id:"productName",type:"text",class:y(["form-input",{"border-red-500":i.value.name}]),"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.name=l),required:""},null,2),[[p,a.value.name]]),i.value.name?(r(),o("p",te,c(i.value.name),1)):v("",!0)]),t("div",ae,[e[21]||(e[21]=t("label",{for:"category"},[b("Kategori "),t("span",{class:"text-red-500"},"*")],-1)),n(t("select",{id:"category",class:y(["form-select",{"border-red-500":i.value.categoryId}]),"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.categoryId=l),required:"",onChange:z},[e[20]||(e[20]=t("option",{value:""},"Kategori Seçiniz",-1)),(r(!0),o(T,null,h(w.value,l=>(r(),o("option",{key:l.id,value:l.id},c(l.name),9,le))),128))],34),[[I,a.value.categoryId]]),i.value.categoryId?(r(),o("p",se,c(i.value.categoryId),1)):v("",!0)]),t("div",ie,[e[23]||(e[23]=t("label",{for:"subCategory"},[b("Alt Kategori "),t("span",{class:"text-red-500"},"*")],-1)),n(t("select",{id:"subCategory",class:y(["form-select",{"border-red-500":i.value.subCategory}]),"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.subCategory=l),required:"",disabled:!a.value.categoryId||u.value.length===0},[e[22]||(e[22]=t("option",{value:""},"Alt Kategori Seçiniz",-1)),(r(!0),o(T,null,h(u.value,(l,q)=>(r(),o("option",{key:q,value:l},c(l),9,re))),128))],10,oe),[[I,a.value.subCategory]]),i.value.subCategory?(r(),o("p",ne,c(i.value.subCategory),1)):v("",!0)]),t("div",ue,[e[25]||(e[25]=t("label",{for:"unit"},[b("Birim "),t("span",{class:"text-red-500"},"*")],-1)),n(t("select",{id:"unit",class:y(["form-select",{"border-red-500":i.value.unit}]),"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.unit=l),required:""},e[24]||(e[24]=[G('<option value="adet">Adet</option><option value="takım">Takım</option><option value="lt">Litre</option><option value="mt">Metre</option><option value="kutu">Kutu</option><option value="paket">Paket</option>',6)]),2),[[I,a.value.unit]]),i.value.unit?(r(),o("p",de,c(i.value.unit),1)):v("",!0)]),t("div",me,[e[26]||(e[26]=t("label",{for:"minStockLevel"},"Minimum Stok Seviyesi",-1)),n(t("input",{id:"minStockLevel",type:"number",class:"form-input","onUpdate:modelValue":e[6]||(e[6]=l=>a.value.minStockLevel=l),min:"0"},null,512),[[p,a.value.minStockLevel]])]),t("div",ve,[e[27]||(e[27]=t("label",{for:"totalStock"},"Toplam Stok",-1)),n(t("input",{id:"totalStock",type:"number",class:"form-input bg-gray-100","onUpdate:modelValue":e[7]||(e[7]=l=>a.value.totalStock=l),disabled:""},null,512),[[p,a.value.totalStock]]),e[28]||(e[28]=t("p",{class:"text-xs text-gray-500 mt-1"},"Stok hareketleriyle güncellenir",-1))]),t("div",pe,[t("label",ce,[n(t("input",{type:"checkbox",class:"form-checkbox","onUpdate:modelValue":e[8]||(e[8]=l=>a.value.hasSerialization=l)},null,512),[[V,a.value.hasSerialization]]),e[29]||(e[29]=t("span",{class:"ml-2"},"Seri Numarası İle Takip Et",-1))]),e[30]||(e[30]=t("p",{class:"text-xs text-gray-500 mt-1"},"Ürünleri benzersiz seri numarası ile takip etmek için işaretleyin",-1))]),a.value.hasSerialization?(r(),o("div",be,[t("label",ke,[n(t("input",{type:"checkbox",class:"form-checkbox","onUpdate:modelValue":e[9]||(e[9]=l=>a.value.requireSerialNumber=l)},null,512),[[V,a.value.requireSerialNumber]]),e[31]||(e[31]=t("span",{class:"ml-2"},"Seri Numarası Zorunlu",-1))]),e[32]||(e[32]=t("p",{class:"text-xs text-gray-500 mt-1"},"İşaretlenirse, stok girişinde seri numarası girişi zorunlu olacaktır",-1))])):v("",!0),a.value.hasSerialization?(r(),o("div",ye,[e[33]||(e[33]=t("label",{for:"serialNumberPrefix"},"Seri Numarası Ön Eki",-1)),n(t("input",{id:"serialNumberPrefix",type:"text",class:"form-input","onUpdate:modelValue":e[10]||(e[10]=l=>a.value.serialNumberPrefix=l),placeholder:"Örn: KMR-"},null,512),[[p,a.value.serialNumberPrefix]]),e[34]||(e[34]=t("p",{class:"text-xs text-gray-500 mt-1"},"Otomatik seri numarası oluşturmada kullanılacak ön ek",-1))])):v("",!0),t("div",fe,[t("label",ge,[n(t("input",{type:"checkbox",class:"form-checkbox","onUpdate:modelValue":e[11]||(e[11]=l=>a.value.isActive=l)},null,512),[[V,a.value.isActive]]),e[35]||(e[35]=t("span",{class:"ml-2"},"Aktif",-1))])]),t("div",xe,[e[36]||(e[36]=t("label",{for:"description"},"Açıklama",-1)),n(t("textarea",{id:"description",class:"form-textarea",rows:"3","onUpdate:modelValue":e[12]||(e[12]=l=>a.value.description=l)},null,512),[[p,a.value.description]])])]),t("div",Se,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:K}," Değişiklikleri İptal Et "),t("button",{type:"submit",class:"btn btn-primary",disabled:g.value},[g.value?(r(),o("span",Ce,"↻")):v("",!0),e[37]||(e[37]=b(" Kaydet "))],8,Ne)])],32)])),d.value.show?(r(),o("div",{key:2,class:y(["fixed top-4 right-4 p-4 rounded shadow-md z-50 transition-all duration-300",{"bg-green-500 text-white":d.value.type==="success","bg-red-500 text-white":d.value.type==="error","bg-blue-500 text-white":d.value.type==="info"}])},[t("div",ze,[t("span",null,c(d.value.message),1),t("button",{class:"ml-4 text-white hover:text-gray-200",onClick:L},e[38]||(e[38]=[t("i",{class:"las la-times"},null,-1)]))])],2)):v("",!0)])}}});export{Ve as default};
