import{y as O,ad as X,r as i,m as z,al as J,t as Q,c as u,a as e,M as D,N as M,I as k,e as N,O as c,d as v,S as R,U as W,V as j,L as Z,a6 as S,o as r,aj as ee}from"./index-CMVsiJL9.js";import{I as B}from"./icon-x-C5nNggym.js";import{_ as te}from"./icon-pencil.vue_vue_type_script_setup_true_lang-pNE-cN8a.js";import{I as ae}from"./icon-trash-lines-4s8JVsKe.js";import{I as se}from"./icon-plus-BXC3-OCg.js";import{I as E,a as le}from"./icon-info-triangle-ZmNT3ayS.js";const oe={class:"panel"},re={class:"flex flex-col md:flex-row items-center justify-between mb-5"},ne={class:"flex flex-col md:flex-row gap-4 w-full md:w-auto mt-4 md:mt-0"},ie={class:"flex items-center"},de={class:"table-responsive"},ue={class:"table-striped w-full bg-white dark:bg-black"},ce={key:0},ve={key:1},me={colspan:"3",class:"text-center p-4 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},be={class:"p-3 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},pe={class:"p-3 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},fe={class:"p-3 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},ge={class:"flex gap-2"},he=["onClick"],ye=["onClick"],ke={key:0,class:"flex justify-between items-center mt-5"},_e={class:"text-sm"},xe={class:"flex gap-2"},we=["disabled"],Ce=["disabled"],Ke={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},Ie={class:"panel bg-white dark:bg-gray-800 w-full max-w-md"},ze={class:"flex items-center justify-between mb-5"},De={class:"font-semibold text-lg"},Me={class:"mb-4"},Ne={key:0,class:"text-red-500 text-xs mt-1"},je={class:"mb-4"},Se={class:"flex justify-end gap-4"},Te=["disabled"],Ve={key:1,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},$e={class:"panel bg-white dark:bg-gray-800 w-full max-w-md p-6"},Be={class:"flex flex-col items-center mb-5"},Ee={class:"text-red-500 p-4"},Ae={class:"flex justify-center gap-4"},Le=["disabled"],Pe={key:0,class:"animate-spin mr-2"},Ue={class:"flex items-center gap-2"},Je=O({__name:"list",setup(Fe){const f=X(),d=i(!1),x=i(!1),_=i(!1),w=i([]),m=i({}),C=i(""),o=i(1),g=i(5),K=i(!1),h=i(null),n=i({show:!1,message:"",type:"info"}),s=i({id:"",name:"",description:""}),y=z(()=>{if(!C.value)return w.value;const a=C.value.toLowerCase();return w.value.filter(t=>t.name.toLowerCase().includes(a)||t.description&&t.description.toLowerCase().includes(a))}),b=z(()=>Math.ceil(y.value.length/g.value)),T=z(()=>{const a=(o.value-1)*g.value,t=a+g.value;return y.value.slice(a,t)});J([y,g],()=>{o.value>b.value&&b.value>0&&(o.value=b.value),o.value<1&&b.value>0&&(o.value=1)}),Q(()=>{$()});const p=(a,t="info")=>{n.value.timeout&&clearTimeout(n.value.timeout),n.value={show:!0,message:a,type:t,timeout:setTimeout(()=>{V()},3e3)}},V=()=>{n.value.show=!1},A=()=>{o.value=1},$=async()=>{d.value=!0;try{w.value=f.getCategories.map(a=>({...a,description:a.description||""})),p("Kategoriler başarıyla yüklendi","success")}catch(a){console.error("Kategoriler yüklenirken hata oluştu:",a),p("Kategoriler yüklenirken hata oluştu","error")}finally{d.value=!1}},L=()=>{_.value=!1,s.value={id:"",name:"",description:""},m.value={},x.value=!0},P=a=>{_.value=!0,s.value={...a},m.value={},x.value=!0},I=()=>{x.value=!1,s.value={id:"",name:"",description:""},m.value={}},U=()=>{let a=!0;return m.value={},s.value.name.trim()||(m.value.name="Kategori adı zorunludur",a=!1),a},F=async()=>{if(U()){d.value=!0;try{_.value?(await f.updateCategory(s.value.id,{name:s.value.name,description:s.value.description}),p(`"${s.value.name}" kategorisi güncellendi`,"success")):(await f.addCategory({name:s.value.name,description:s.value.description}),p(`"${s.value.name}" kategorisi oluşturuldu`,"success")),w.value=f.getCategories.map(a=>({...a,description:a.description||""})),I()}catch(a){console.error("Kategori kaydedilirken hata oluştu:",a),p("Kategori kaydedilirken hata oluştu","error")}finally{d.value=!1}}},Y=a=>{h.value=a,K.value=!0},q=()=>{K.value=!1,h.value=null},G=async()=>{var a;if(h.value!==null){d.value=!0;try{const t=((a=f.getCategories.find(l=>l.id===h.value))==null?void 0:a.name)||"Bilinmeyen Kategori";f.deleteCategory(h.value),p(`"${t}" kategorisi silindi`,"success"),$(),K.value=!1,h.value=null}catch(t){console.error("Kategori silinirken hata oluştu:",t),p("Kategori silinirken hata oluştu","error")}finally{d.value=!1}}};return(a,t)=>(r(),u("div",null,[e("div",oe,[e("div",re,[t[6]||(t[6]=e("h5",{class:"font-semibold text-lg dark:text-white-light"},"Kategoriler",-1)),e("div",ne,[e("div",ie,[D(e("input",{type:"text",class:"form-input",placeholder:"Kategori ara...","onUpdate:modelValue":t[0]||(t[0]=l=>C.value=l),onInput:A},null,544),[[M,C.value]])]),e("button",{class:"btn btn-primary",onClick:L},[k(se,{class:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),t[5]||(t[5]=N(" Yeni Kategori Ekle "))])])]),e("div",de,[e("table",ue,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{class:"border-b border-[#e0e6ed] dark:border-[#1b2e4b] p-3 text-left"},"Kategori Adı"),e("th",{class:"border-b border-[#e0e6ed] dark:border-[#1b2e4b] p-3 text-left"},"Açıklama"),e("th",{class:"border-b border-[#e0e6ed] dark:border-[#1b2e4b] p-3 text-left"},"İşlemler")])],-1)),e("tbody",null,[d.value?(r(),u("tr",ce,t[7]||(t[7]=[e("td",{colspan:"3",class:"text-center"},[e("div",{class:"flex justify-center items-center p-4"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-2 border-primary border-l-transparent"})])],-1)]))):T.value.length===0?(r(),u("tr",ve,[e("td",me,c(y.value.length===0?"Henüz kategori bulunmamaktadır.":"Aramanızla eşleşen kategori bulunamadı."),1)])):v("",!0),(r(!0),u(R,null,W(T.value,l=>(r(),u("tr",{key:l.id,class:"hover:bg-[#f6f7f8] dark:hover:bg-[#1a222e]"},[e("td",be,c(l.name),1),e("td",pe,c(l.description),1),e("td",fe,[e("div",ge,[e("button",{class:"btn btn-sm btn-outline-primary",onClick:H=>P(l)},[k(te,{class:"w-4.5 h-4.5"})],8,he),e("button",{class:"btn btn-sm btn-outline-danger",onClick:H=>Y(l.id)},[k(ae,{class:"w-4.5 h-4.5"})],8,ye)])])]))),128))])]),!d.value&&b.value>1?(r(),u("div",ke,[e("div",null,[e("span",_e,"Toplam "+c(y.value.length)+" kategoriden "+c((o.value-1)*g.value+1)+"-"+c(Math.min(o.value*g.value,y.value.length))+" arası gösteriliyor",1)]),e("div",xe,[e("button",{class:j(["btn btn-sm",o.value===1?"btn-gray":"btn-primary"]),disabled:o.value===1,onClick:t[1]||(t[1]=l=>o.value--)}," Önceki ",10,we),e("button",{class:j(["btn btn-sm",o.value===b.value?"btn-gray":"btn-primary"]),disabled:o.value===b.value,onClick:t[2]||(t[2]=l=>o.value++)}," Sonraki ",10,Ce)])])):v("",!0)])]),x.value?(r(),u("div",Ke,[e("div",Ie,[e("div",ze,[e("h5",De,c(_.value?"Kategori Düzenle":"Yeni Kategori Ekle"),1),e("button",{class:"text-gray-400 hover:text-gray-800",onClick:I},[k(B,{class:"w-5 h-5"})])]),e("form",{onSubmit:Z(F,["prevent"])},[e("div",Me,[t[9]||(t[9]=e("label",{for:"categoryName"},[N("Kategori Adı "),e("span",{class:"text-red-500"},"*")],-1)),D(e("input",{id:"categoryName",type:"text",class:"form-input","onUpdate:modelValue":t[3]||(t[3]=l=>s.value.name=l),required:""},null,512),[[M,s.value.name]]),m.value.name?(r(),u("p",Ne,c(m.value.name),1)):v("",!0)]),e("div",je,[t[10]||(t[10]=e("label",{for:"categoryDescription"},"Açıklama",-1)),D(e("textarea",{id:"categoryDescription",class:"form-textarea",rows:"3","onUpdate:modelValue":t[4]||(t[4]=l=>s.value.description=l)},null,512),[[M,s.value.description]])]),e("div",Se,[e("button",{type:"button",class:"btn btn-outline-danger",onClick:I}," İptal "),e("button",{type:"submit",class:"btn btn-primary",disabled:d.value},c(_.value?"Güncelle":"Ekle"),9,Te)])],32)])])):v("",!0),K.value?(r(),u("div",Ve,[e("div",$e,[e("div",Be,[e("div",Ee,[k(E,{class:"w-12 h-12"})]),t[11]||(t[11]=e("h5",{class:"font-semibold text-lg mb-2"},"Kategori Silme",-1)),t[12]||(t[12]=e("p",{class:"text-center"},"Bu kategoriyi silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.",-1))]),e("div",Ae,[e("button",{type:"button",class:"btn btn-outline-primary",onClick:q}," İptal "),e("button",{type:"button",class:"btn btn-danger",onClick:G,disabled:d.value},[d.value?(r(),u("span",Pe,"↻")):v("",!0),t[13]||(t[13]=N(" Evet, Sil "))],8,Le)])])])):v("",!0),n.value.show?(r(),u("div",{key:2,class:j(["fixed top-4 right-4 p-4 rounded shadow-md z-50 transition-all duration-300",{"bg-green-500 text-white":n.value.type==="success","bg-red-500 text-white":n.value.type==="error","bg-blue-500 text-white":n.value.type==="info"}])},[e("div",Ue,[n.value.type==="success"?(r(),S(le,{key:0,class:"w-5 h-5"})):n.value.type==="error"?(r(),S(E,{key:1,class:"w-5 h-5"})):n.value.type==="info"?(r(),S(ee,{key:2,class:"w-5 h-5"})):v("",!0),e("span",null,c(n.value.message),1),e("button",{class:"ml-4 text-white hover:text-gray-200",onClick:V},[k(B,{class:"w-4 h-4"})])])],2)):v("",!0)]))}});export{Je as default};
