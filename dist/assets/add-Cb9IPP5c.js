import{y as U,ad as q,r as c,t as R,c as i,a as t,I as M,J as E,L as F,e as p,M as u,N as b,V as k,O as v,d,a7 as N,S as z,U as w,b as D,P as I,Q as _,R as G,o as r}from"./index-CMVsiJL9.js";const j={class:"panel"},H={class:"flex items-center justify-between mb-5"},O={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},J={class:"mb-4"},Q={key:0,class:"text-red-500 text-xs mt-1"},Y={class:"mb-4"},Z={key:0,class:"text-red-500 text-xs mt-1"},$={class:"mb-4"},W=["value"],X={key:0,class:"text-red-500 text-xs mt-1"},ee={class:"mb-4"},te=["disabled"],ae=["value"],se={key:0,class:"text-red-500 text-xs mt-1"},le={class:"mb-4"},oe={key:0,class:"text-red-500 text-xs mt-1"},ie={class:"mb-4"},re={class:"mb-4"},ne={class:"mb-4"},ue={class:"flex items-center"},de={key:0,class:"mb-4"},me={class:"flex items-center"},ve={key:1,class:"mb-4"},ce={class:"mb-4 sm:col-span-2"},pe={class:"flex justify-end gap-4 mt-4"},be=["disabled"],ke={key:0,class:"animate-spin mr-2"},fe={class:"flex items-center gap-2"},xe=U({__name:"add",setup(ge){const A=G(),y=q(),f={ekinoks:["Hareketli Kamera","Sabit Kamera","Balistik Kamera","Akıllı Hareketli","Akıllı Sabit"],geko:["Geko","Geko+","Mobil PTS"],kayitcihazi:["NIR 54TB","NIR 96TB","CIR 96TB","CIR 216TB","NVR 64TB","NVR 96 TB","NAR 64 TB","NAR 96 TB"],ethernet:["C Tipi Ethernet Anahtar","B Tipi Ethernet Anahtar","A Tipi Ethernet Anahtar"]},n=c([]),a=c({code:"",name:"",categoryId:"",subCategory:"",unit:"adet",stockNumber:"",minStockLevel:0,description:"",isActive:!0,hasSerialization:!1,requireSerialNumber:!1,serialNumberPrefix:""}),l=c({}),g=c(!1);c(!1);const m=c({show:!1,message:"",type:"info"}),x=c(y.getCategories),V=()=>{const o=x.value.find(e=>e.id===a.value.categoryId);if(o){const e=o.name.toLowerCase();e.includes("ekinoks")?n.value=f.ekinoks:e.includes("geko")?n.value=f.geko:e.includes("kayıt")||e.includes("kayit")?n.value=f.kayitcihazi:e.includes("ethernet")?n.value=f.ethernet:n.value=[],a.value.subCategory="",console.log("Kategori değişti:",o.name,"Alt kategoriler:",n.value)}else n.value=[],a.value.subCategory=""},h=o=>y.getProducts.find(s=>s.code&&s.code.toLowerCase()===o.toLowerCase())===void 0,T=()=>{l.value={};let o=!0;return a.value.code.trim()?h(a.value.code)||(l.value.code="Bu ürün kodu zaten kullanılıyor",o=!1):(l.value.code="Ürün kodu zorunludur",o=!1),a.value.name.trim()||(l.value.name="Ürün adı zorunludur",o=!1),a.value.categoryId||(l.value.categoryId="Kategori seçmelisiniz",o=!1),a.value.categoryId&&n.value.length>0&&!a.value.subCategory&&(l.value.subCategory="Alt kategori seçmelisiniz",o=!1),a.value.unit||(l.value.unit="Birim seçmelisiniz",o=!1),o},B=()=>{a.value={code:"",name:"",categoryId:"",subCategory:"",unit:"adet",stockNumber:"",minStockLevel:0,description:"",isActive:!0,hasSerialization:!1,requireSerialNumber:!1,serialNumberPrefix:""},l.value={},n.value=[],S("Form temizlendi","info")},S=(o,e="info")=>{m.value={show:!0,message:o,type:e},setTimeout(()=>{m.value.show=!1},3e3)},P=()=>{m.value.show=!1},L=async()=>{var o;if(T()){g.value=!0;try{await y.addProduct({code:a.value.code,name:a.value.name,categoryId:a.value.categoryId,subCategory:a.value.subCategory,unit:a.value.unit,stockNumber:a.value.stockNumber,minStockLevel:a.value.minStockLevel,description:a.value.description,isActive:a.value.isActive,category:((o=x.value.find(e=>e.id===a.value.categoryId))==null?void 0:o.name)||"",hasSerialization:a.value.hasSerialization,requireSerialNumber:a.value.requireSerialNumber,serialNumberPrefix:a.value.serialNumberPrefix,unitPrice:0}),S(`"${a.value.name}" ürünü başarıyla eklendi`,"success"),setTimeout(()=>{A.push("/inventory/products")},1500)}catch(e){console.error("Ürün eklenirken hata oluştu:",e),S("Ürün eklenirken bir hata oluştu","error")}finally{g.value=!1}}};return R(()=>{}),(o,e)=>{const C=_("router-link");return r(),i("div",null,[t("div",j,[t("div",H,[e[12]||(e[12]=t("h5",{class:"font-semibold text-lg dark:text-white-light"},"Yeni Ürün Ekle",-1)),M(C,{to:"/inventory/products",class:"btn btn-outline-primary"},{default:E(()=>e[11]||(e[11]=[t("i",{class:"las la-arrow-left"},null,-1),p(" Geri Dön ")])),_:1})]),t("form",{onSubmit:F(L,["prevent"])},[t("div",O,[t("div",J,[e[13]||(e[13]=t("label",{for:"productCode"},[p("Ürün Kodu "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{id:"productCode",type:"text",class:k(["form-input",{"border-red-500":l.value.code}]),"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.code=s),required:""},null,2),[[b,a.value.code]]),l.value.code?(r(),i("p",Q,v(l.value.code),1)):d("",!0)]),t("div",Y,[e[14]||(e[14]=t("label",{for:"productName"},[p("Ürün Adı "),t("span",{class:"text-red-500"},"*")],-1)),u(t("input",{id:"productName",type:"text",class:k(["form-input",{"border-red-500":l.value.name}]),"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.name=s),required:""},null,2),[[b,a.value.name]]),l.value.name?(r(),i("p",Z,v(l.value.name),1)):d("",!0)]),t("div",$,[e[16]||(e[16]=t("label",{for:"category"},[p("Kategori "),t("span",{class:"text-red-500"},"*")],-1)),u(t("select",{id:"category",class:k(["form-select",{"border-red-500":l.value.categoryId}]),"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.categoryId=s),required:"",onChange:V},[e[15]||(e[15]=t("option",{value:""},"Kategori Seçiniz",-1)),(r(!0),i(z,null,w(x.value,s=>(r(),i("option",{key:s.id,value:s.id},v(s.name),9,W))),128))],34),[[N,a.value.categoryId]]),l.value.categoryId?(r(),i("p",X,v(l.value.categoryId),1)):d("",!0)]),t("div",ee,[e[18]||(e[18]=t("label",{for:"subCategory"},[p("Alt Kategori "),t("span",{class:"text-red-500"},"*")],-1)),u(t("select",{id:"subCategory",class:k(["form-select",{"border-red-500":l.value.subCategory}]),"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.subCategory=s),required:"",disabled:!a.value.categoryId||n.value.length===0},[e[17]||(e[17]=t("option",{value:""},"Alt Kategori Seçiniz",-1)),(r(!0),i(z,null,w(n.value,(s,K)=>(r(),i("option",{key:K,value:s},v(s),9,ae))),128))],10,te),[[N,a.value.subCategory]]),l.value.subCategory?(r(),i("p",se,v(l.value.subCategory),1)):d("",!0)]),t("div",le,[e[20]||(e[20]=t("label",{for:"unit"},[p("Birim "),t("span",{class:"text-red-500"},"*")],-1)),u(t("select",{id:"unit",class:k(["form-select",{"border-red-500":l.value.unit}]),"onUpdate:modelValue":e[4]||(e[4]=s=>a.value.unit=s),required:""},e[19]||(e[19]=[D('<option value="adet">Adet</option><option value="takım">Takım</option><option value="lt">Litre</option><option value="mt">Metre</option><option value="kutu">Kutu</option><option value="paket">Paket</option>',6)]),2),[[N,a.value.unit]]),l.value.unit?(r(),i("p",oe,v(l.value.unit),1)):d("",!0)]),t("div",ie,[e[21]||(e[21]=t("label",{for:"stockNumber"},"Stok Numarası",-1)),u(t("input",{id:"stockNumber",type:"text",class:"form-input","onUpdate:modelValue":e[5]||(e[5]=s=>a.value.stockNumber=s),placeholder:"Stok numarası giriniz"},null,512),[[b,a.value.stockNumber]])]),t("div",re,[e[22]||(e[22]=t("label",{for:"minStockLevel"},"Minimum Stok Seviyesi",-1)),u(t("input",{id:"minStockLevel",type:"number",class:"form-input","onUpdate:modelValue":e[6]||(e[6]=s=>a.value.minStockLevel=s),min:"0"},null,512),[[b,a.value.minStockLevel]])]),t("div",ne,[t("label",ue,[u(t("input",{type:"checkbox",class:"form-checkbox","onUpdate:modelValue":e[7]||(e[7]=s=>a.value.hasSerialization=s)},null,512),[[I,a.value.hasSerialization]]),e[23]||(e[23]=t("span",{class:"ml-2"},"Seri Numarası İle Takip Et",-1))]),e[24]||(e[24]=t("p",{class:"text-xs text-gray-500 mt-1"},"Ürünleri benzersiz seri numarası ile takip etmek için işaretleyin",-1))]),a.value.hasSerialization?(r(),i("div",de,[t("label",me,[u(t("input",{type:"checkbox",class:"form-checkbox","onUpdate:modelValue":e[8]||(e[8]=s=>a.value.requireSerialNumber=s)},null,512),[[I,a.value.requireSerialNumber]]),e[25]||(e[25]=t("span",{class:"ml-2"},"Seri Numarası Zorunlu",-1))]),e[26]||(e[26]=t("p",{class:"text-xs text-gray-500 mt-1"},"İşaretlenirse, stok girişinde seri numarası girişi zorunlu olacaktır",-1))])):d("",!0),a.value.hasSerialization?(r(),i("div",ve,[e[27]||(e[27]=t("label",{for:"serialNumberPrefix"},"Seri Numarası Ön Eki",-1)),u(t("input",{id:"serialNumberPrefix",type:"text",class:"form-input","onUpdate:modelValue":e[9]||(e[9]=s=>a.value.serialNumberPrefix=s),placeholder:"Örn: KMR-"},null,512),[[b,a.value.serialNumberPrefix]]),e[28]||(e[28]=t("p",{class:"text-xs text-gray-500 mt-1"},"Otomatik seri numarası oluşturmada kullanılacak ön ek",-1))])):d("",!0),t("div",ce,[e[29]||(e[29]=t("label",{for:"description"},"Açıklama",-1)),u(t("textarea",{id:"description",class:"form-textarea",rows:"3","onUpdate:modelValue":e[10]||(e[10]=s=>a.value.description=s)},null,512),[[b,a.value.description]])])]),t("div",pe,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:B}," Formu Temizle "),t("button",{type:"submit",class:"btn btn-primary",disabled:g.value},[g.value?(r(),i("span",ke,"↻")):d("",!0),e[30]||(e[30]=p(" Ürün Ekle "))],8,be)])],32)]),m.value.show?(r(),i("div",{key:0,class:k(["fixed top-4 right-4 p-4 rounded shadow-md z-50 transition-all duration-300",{"bg-green-500 text-white":m.value.type==="success","bg-red-500 text-white":m.value.type==="error","bg-blue-500 text-white":m.value.type==="info"}])},[t("div",fe,[t("span",null,v(m.value.message),1),t("button",{class:"ml-4 text-white hover:text-gray-200",onClick:P},e[31]||(e[31]=[t("i",{class:"las la-times"},null,-1)]))])],2)):d("",!0)])}}});export{xe as default};
