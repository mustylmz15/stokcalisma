import{u as M}from"./ariza-store-C8TUQZm-.js";import{y as D,u as L,r as k,t as Y,c as n,a as e,O as r,V as j,d as y,S as _,U as S,f as T,g as C,h as $,T as x,B as I,o as u}from"./index-CMVsiJL9.js";import"./serializedInventoryService-3dz-cBVH.js";const B={class:"panel p-6"},G={class:"mb-8"},K={class:"mb-4"},O=["disabled"],R={class:"mb-8"},V={class:"mb-4"},N=["disabled"],U={key:0,class:"mt-10"},F={class:"overflow-x-auto"},q={class:"table-auto w-full"},H={class:"px-4 py-2"},J={class:"px-4 py-2"},Q={class:"px-4 py-2"},W={key:1,class:"mt-10"},X={class:"overflow-x-auto"},Z={class:"table-auto w-full"},ee={class:"px-4 py-2"},te={class:"px-4 py-2"},se={class:"px-4 py-2"},ae={class:"px-4 py-2"},ne=D({__name:"setup",setup(re){const b=M(),l=L(),c=k(!1),v=k([]),o=k(null),m=k(!1),p=k([]),i=k(null);async function g(){c.value=!0;try{await b.fetchServiceCenters(),v.value=b.getServiceCenters}catch(a){console.error("Servis merkezleri yüklenirken hata oluştu:",a),l.error("Servis merkezleri yüklenirken bir hata oluştu")}finally{c.value=!1}}async function P(){c.value=!0,o.value=null;try{const a=[{name:"Ankara Onarım Merkezi",location:"Ankara, Türkiye",contactInfo:"Tel: +90 312 555 44 33, Email: ankara@onarimaerkezi.com",specialties:["Elektronik","Donanım","Yazılım"]},{name:"Malatya Onarım Merkezi",location:"Malatya, Türkiye",contactInfo:"Tel: +90 422 555 22 11, Email: malatya@onarimaerkezi.com",specialties:["Elektronik","Donanım"]},{name:"Gaziantep Onarım Merkezi",location:"Gaziantep, Türkiye",contactInfo:"Tel: +90 342 555 66 77, Email: gaziantep@onarimaerkezi.com",specialties:["Elektronik","Donanım","Mekanik"]}];let t=0,s=0;for(const d of a){if(v.value.some(h=>h.name.toLowerCase()===d.name.toLowerCase())){s++;continue}await b.addServiceCenter(d)&&t++}t>0?(o.value={message:`${t} servis merkezi başarıyla eklendi. ${s} servis merkezi zaten mevcut olduğu için atlandı.`,error:!1},l.success("Servis merkezleri başarıyla eklendi"),await g()):s>0?(o.value={message:"Tüm servis merkezleri zaten mevcut olduğu için hiçbir merkez eklenmedi.",error:!1},l.info("Tüm servis merkezleri zaten mevcut")):(o.value={message:"Servis merkezi eklenemedi.",error:!0},l.error("Servis merkezi eklenemedi"))}catch(a){console.error("Servis merkezleri eklenirken hata oluştu:",a),o.value={message:"Servis merkezleri eklenirken bir hata oluştu.",error:!0},l.error("Servis merkezleri eklenirken bir hata oluştu")}finally{c.value=!1}}async function z(){m.value=!0;try{const a=T(C,"projects"),t=await $(a);p.value=t.docs.map(s=>({id:s.id,...s.data()}))}catch(a){console.error("Projeler yüklenirken hata oluştu:",a),l.error("Projeler yüklenirken bir hata oluştu")}finally{m.value=!1}}async function w(){m.value=!0,i.value=null;try{const a=[{name:"TYP Projesi",description:"Türkiye Yolcu Projelendirmesi",createdAt:x.now(),status:"aktif"},{name:"KGYS Projesi",description:"Kent Güvenlik Yönetim Sistemi",createdAt:x.now(),status:"aktif"},{name:"EDS Projesi",description:"Elektronik Denetleme Sistemi",createdAt:x.now(),status:"aktif"}],t=T(C,"projects");let s=0,d=0;for(const f of a){if(p.value.some(A=>A.name.toLowerCase()===f.name.toLowerCase())){d++;continue}const h=await I(t,f);console.log(`Proje başarıyla eklendi! ID: ${h.id}, İsim: ${f.name}`),s++}s>0?(i.value={message:`${s} proje başarıyla eklendi. ${d} proje zaten mevcut olduğu için atlandı.`,error:!1},l.success("Projeler başarıyla eklendi"),await z()):d>0?(i.value={message:"Tüm projeler zaten mevcut olduğu için hiçbir proje eklenmedi.",error:!1},l.info("Tüm projeler zaten mevcut")):(i.value={message:"Proje eklenemedi.",error:!0},l.error("Proje eklenemedi"))}catch(a){console.error("Projeler eklenirken hata oluştu:",a),i.value={message:"Projeler eklenirken bir hata oluştu.",error:!0},l.error("Projeler eklenirken bir hata oluştu")}finally{m.value=!1}}return Y(async()=>{await g(),await z()}),(a,t)=>(u(),n("div",null,[e("div",B,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold mb-6"},"Arıza Yönetimi Kurulumu",-1)),e("div",G,[t[0]||(t[0]=e("h2",{class:"text-xl font-semibold mb-4"},"Servis Merkezleri",-1)),e("p",K,"Sistemde "+r(v.value.length)+" servis merkezi bulunuyor. Temel servis merkezlerini eklemek için aşağıdaki butonu kullanın.",1),e("button",{onClick:P,class:"btn btn-primary",disabled:c.value},r(c.value?"Ekleniyor...":"Temel Servis Merkezlerini Ekle"),9,O),o.value?(u(),n("div",{key:0,class:j(["mt-4 p-4 rounded-lg",{"bg-success-light text-success":!o.value.error,"bg-danger-light text-danger":o.value.error}])},r(o.value.message),3)):y("",!0)]),e("div",R,[t[1]||(t[1]=e("h2",{class:"text-xl font-semibold mb-4"},"Projeler",-1)),e("p",V,"Sistemde "+r(p.value.length)+" proje bulunuyor. Temel projeleri eklemek için aşağıdaki butonu kullanın.",1),e("button",{onClick:w,class:"btn btn-primary",disabled:m.value},r(m.value?"Projeler Ekleniyor...":"Temel Projeleri Ekle"),9,N),i.value?(u(),n("div",{key:0,class:j(["mt-4 p-4 rounded-lg",{"bg-success-light text-success":!i.value.error,"bg-danger-light text-danger":i.value.error}])},r(i.value.message),3)):y("",!0)]),p.value.length>0?(u(),n("div",U,[t[3]||(t[3]=e("h3",{class:"text-lg font-semibold mb-3"},"Mevcut Projeler",-1)),e("div",F,[e("table",q,[t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Adı"),e("th",{class:"px-4 py-2 text-left"},"Açıklama"),e("th",{class:"px-4 py-2 text-left"},"Durum")])],-1)),e("tbody",null,[(u(!0),n(_,null,S(p.value,s=>(u(),n("tr",{key:s.id,class:"border-t"},[e("td",H,r(s.name),1),e("td",J,r(s.description),1),e("td",Q,r(s.status),1)]))),128))])])])])):y("",!0),v.value.length>0?(u(),n("div",W,[t[5]||(t[5]=e("h3",{class:"text-lg font-semibold mb-3"},"Mevcut Servis Merkezleri",-1)),e("div",X,[e("table",Z,[t[4]||(t[4]=e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"Adı"),e("th",{class:"px-4 py-2 text-left"},"Konum"),e("th",{class:"px-4 py-2 text-left"},"İletişim"),e("th",{class:"px-4 py-2 text-left"},"Uzmanlıklar")])],-1)),e("tbody",null,[(u(!0),n(_,null,S(v.value,s=>(u(),n("tr",{key:s.id,class:"border-t"},[e("td",ee,r(s.name),1),e("td",te,r(s.location),1),e("td",se,r(s.contactInfo),1),e("td",ae,r(s.specialties.join(", ")),1)]))),128))])])])])):y("",!0)])]))}});export{ne as default};
