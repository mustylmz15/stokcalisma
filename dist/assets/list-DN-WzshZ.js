import{d as X,ae as J,r as i,k as I,w as O,a as Q,f as d,i as e,E as M,F as N,m as y,s as S,G as c,H as v,K as R,L as W,M as T,D as Z,S as $,e as n,a5 as V,an as ee}from"./index-C3vCaKLz.js";import{_ as te}from"./icon-pencil.vue_vue_type_script_setup_true_lang-B3Exfwjj.js";import{I as ae}from"./icon-trash-lines-B4AMM63D.js";import{I as se}from"./icon-plus-Bic1CB4s.js";import{I as B,a as le}from"./icon-info-triangle-B-lHPjrN.js";const oe={class:"panel"},ne={class:"flex flex-col md:flex-row items-center justify-between mb-5"},re={class:"flex flex-col md:flex-row gap-4 w-full md:w-auto mt-4 md:mt-0"},ie={class:"flex items-center"},ue={class:"table-responsive"},de={class:"table-striped w-full bg-white dark:bg-black"},ce={key:0},ve={key:1},me={colspan:"3",class:"text-center p-4 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},be={class:"p-3 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},fe={class:"p-3 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},pe={class:"p-3 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},ge={class:"flex gap-2"},he=["onClick"],ye=["onClick"],ke={key:0,class:"flex justify-between items-center mt-5"},_e={class:"text-sm"},xe={class:"flex gap-2"},we=["disabled"],Ce=["disabled"],Ke={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},De={class:"panel bg-white dark:bg-gray-800 w-full max-w-md"},ze={class:"flex items-center justify-between mb-5"},Ie={class:"font-semibold text-lg"},Me={class:"mb-4"},Ne={key:0,class:"text-red-500 text-xs mt-1"},Se={class:"mb-4"},Te={class:"flex justify-end gap-4"},$e=["disabled"],je={key:1,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},Ee={class:"panel bg-white dark:bg-gray-800 w-full max-w-md p-6"},Ve={class:"flex flex-col items-center mb-5"},Be={class:"text-red-500 p-4"},Ae={class:"flex justify-center gap-4"},Le=["disabled"],Pe={key:0,class:"animate-spin mr-2"},Fe={class:"flex items-center gap-2"},Je=X({__name:"list",setup(Ue){const k=J(),u=i(!1),x=i(!1),_=i(!1),K=i([]),m=i({}),w=i(""),o=i(1),p=i(5),C=i(!1),g=i(null),r=i({show:!1,message:"",type:"info"}),s=i({id:"",name:"",description:""}),h=I(()=>{if(!w.value)return K.value;const a=w.value.toLowerCase();return K.value.filter(t=>t.name.toLowerCase().includes(a)||t.description&&t.description.toLowerCase().includes(a))}),b=I(()=>Math.ceil(h.value.length/p.value)),j=I(()=>{const a=(o.value-1)*p.value,t=a+p.value;return h.value.slice(a,t)});O([h,p],()=>{o.value>b.value&&b.value>0&&(o.value=b.value),o.value<1&&b.value>0&&(o.value=1)}),Q(()=>{D()});const f=(a,t="info")=>{r.value.timeout&&clearTimeout(r.value.timeout),r.value={show:!0,message:a,type:t,timeout:setTimeout(()=>{E()},3e3)}},E=()=>{r.value.show=!1},A=()=>{o.value=1},D=async()=>{u.value=!0;try{K.value=k.getCategories.map(a=>({...a,description:a.description||""})),f("Kategoriler başarıyla yüklendi","success")}catch(a){console.error("Kategoriler yüklenirken hata oluştu:",a),f("Kategoriler yüklenirken hata oluştu","error")}finally{u.value=!1}},L=()=>{_.value=!1,s.value={id:"",name:"",description:""},m.value={},x.value=!0},P=a=>{_.value=!0,s.value={...a},m.value={},x.value=!0},z=()=>{x.value=!1,s.value={id:"",name:"",description:""},m.value={}},F=()=>{let a=!0;return m.value={},s.value.name.trim()||(m.value.name="Kategori adı zorunludur",a=!1),a},U=async()=>{if(F()){u.value=!0;try{_.value?(k.updateCategory(s.value.id,{name:s.value.name,description:s.value.description}),f(`"${s.value.name}" kategorisi güncellendi`,"success")):(k.addCategory({name:s.value.name,description:s.value.description}),f(`"${s.value.name}" kategorisi oluşturuldu`,"success")),D(),z()}catch(a){console.error("Kategori kaydedilirken hata oluştu:",a),f("Kategori kaydedilirken hata oluştu","error")}finally{u.value=!1}}},G=a=>{g.value=a,C.value=!0},H=()=>{C.value=!1,g.value=null},Y=async()=>{var a;if(g.value!==null){u.value=!0;try{const t=((a=k.getCategories.find(l=>l.id===g.value))==null?void 0:a.name)||"Bilinmeyen Kategori";k.deleteCategory(g.value),f(`"${t}" kategorisi silindi`,"success"),D(),C.value=!1,g.value=null}catch(t){console.error("Kategori silinirken hata oluştu:",t),f("Kategori silinirken hata oluştu","error")}finally{u.value=!1}}};return(a,t)=>(n(),d("div",null,[e("div",oe,[e("div",ne,[t[6]||(t[6]=e("h5",{class:"font-semibold text-lg dark:text-white-light"},"Kategoriler",-1)),e("div",re,[e("div",ie,[M(e("input",{type:"text",class:"form-input",placeholder:"Kategori ara...","onUpdate:modelValue":t[0]||(t[0]=l=>w.value=l),onInput:A},null,544),[[N,w.value]])]),e("button",{class:"btn btn-primary",onClick:L},[y(se,{class:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),t[5]||(t[5]=S(" Yeni Kategori Ekle "))])])]),e("div",ue,[e("table",de,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{class:"border-b border-[#e0e6ed] dark:border-[#1b2e4b] p-3 text-left"},"Kategori Adı"),e("th",{class:"border-b border-[#e0e6ed] dark:border-[#1b2e4b] p-3 text-left"},"Açıklama"),e("th",{class:"border-b border-[#e0e6ed] dark:border-[#1b2e4b] p-3 text-left"},"İşlemler")])],-1)),e("tbody",null,[u.value?(n(),d("tr",ce,t[7]||(t[7]=[e("td",{colspan:"3",class:"text-center"},[e("div",{class:"flex justify-center items-center p-4"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-2 border-primary border-l-transparent"})])],-1)]))):j.value.length===0?(n(),d("tr",ve,[e("td",me,c(h.value.length===0?"Henüz kategori bulunmamaktadır.":"Aramanızla eşleşen kategori bulunamadı."),1)])):v("",!0),(n(!0),d(R,null,W(j.value,l=>(n(),d("tr",{key:l.id,class:"hover:bg-[#f6f7f8] dark:hover:bg-[#1a222e]"},[e("td",be,c(l.name),1),e("td",fe,c(l.description),1),e("td",pe,[e("div",ge,[e("button",{class:"btn btn-sm btn-outline-primary",onClick:q=>P(l)},[y(te,{class:"w-4.5 h-4.5"})],8,he),e("button",{class:"btn btn-sm btn-outline-danger",onClick:q=>G(l.id)},[y(ae,{class:"w-4.5 h-4.5"})],8,ye)])])]))),128))])]),!u.value&&b.value>1?(n(),d("div",ke,[e("div",null,[e("span",_e,"Toplam "+c(h.value.length)+" kategoriden "+c((o.value-1)*p.value+1)+"-"+c(Math.min(o.value*p.value,h.value.length))+" arası gösteriliyor",1)]),e("div",xe,[e("button",{class:T(["btn btn-sm",o.value===1?"btn-gray":"btn-primary"]),disabled:o.value===1,onClick:t[1]||(t[1]=l=>o.value--)}," Önceki ",10,we),e("button",{class:T(["btn btn-sm",o.value===b.value?"btn-gray":"btn-primary"]),disabled:o.value===b.value,onClick:t[2]||(t[2]=l=>o.value++)}," Sonraki ",10,Ce)])])):v("",!0)])]),x.value?(n(),d("div",Ke,[e("div",De,[e("div",ze,[e("h5",Ie,c(_.value?"Kategori Düzenle":"Yeni Kategori Ekle"),1),e("button",{class:"text-gray-400 hover:text-gray-800",onClick:z},[y(V,{class:"w-5 h-5"})])]),e("form",{onSubmit:Z(U,["prevent"])},[e("div",Me,[t[9]||(t[9]=e("label",{for:"categoryName"},[S("Kategori Adı "),e("span",{class:"text-red-500"},"*")],-1)),M(e("input",{id:"categoryName",type:"text",class:"form-input","onUpdate:modelValue":t[3]||(t[3]=l=>s.value.name=l),required:""},null,512),[[N,s.value.name]]),m.value.name?(n(),d("p",Ne,c(m.value.name),1)):v("",!0)]),e("div",Se,[t[10]||(t[10]=e("label",{for:"categoryDescription"},"Açıklama",-1)),M(e("textarea",{id:"categoryDescription",class:"form-textarea",rows:"3","onUpdate:modelValue":t[4]||(t[4]=l=>s.value.description=l)},null,512),[[N,s.value.description]])]),e("div",Te,[e("button",{type:"button",class:"btn btn-outline-danger",onClick:z}," İptal "),e("button",{type:"submit",class:"btn btn-primary",disabled:u.value},c(_.value?"Güncelle":"Ekle"),9,$e)])],32)])])):v("",!0),C.value?(n(),d("div",je,[e("div",Ee,[e("div",Ve,[e("div",Be,[y(B,{class:"w-12 h-12"})]),t[11]||(t[11]=e("h5",{class:"font-semibold text-lg mb-2"},"Kategori Silme",-1)),t[12]||(t[12]=e("p",{class:"text-center"},"Bu kategoriyi silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.",-1))]),e("div",Ae,[e("button",{type:"button",class:"btn btn-outline-primary",onClick:H}," İptal "),e("button",{type:"button",class:"btn btn-danger",onClick:Y,disabled:u.value},[u.value?(n(),d("span",Pe,"↻")):v("",!0),t[13]||(t[13]=S(" Evet, Sil "))],8,Le)])])])):v("",!0),r.value.show?(n(),d("div",{key:2,class:T(["fixed top-4 right-4 p-4 rounded shadow-md z-50 transition-all duration-300",{"bg-green-500 text-white":r.value.type==="success","bg-red-500 text-white":r.value.type==="error","bg-blue-500 text-white":r.value.type==="info"}])},[e("div",Fe,[r.value.type==="success"?(n(),$(le,{key:0,class:"w-5 h-5"})):r.value.type==="error"?(n(),$(B,{key:1,class:"w-5 h-5"})):r.value.type==="info"?(n(),$(ee,{key:2,class:"w-5 h-5"})):v("",!0),e("span",null,c(r.value.message),1),e("button",{class:"ml-4 text-white hover:text-gray-200",onClick:E},[y(V,{class:"w-4 h-4"})])])],2)):v("",!0)]))}});export{Je as default};
