const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CMVsiJL9.js","assets/index-FewHoYh-.css"])))=>i.map(i=>d[i]);
import{av as Ue,aw as ee,A as W,j as C,g as z,p as ie,s as ne,ax as Me,ay as Pe,az as Ce,f as ue,h as de,i as Oe,q as Te,z as Le,D as Ve,k as Re,y as Ne,r as h,m as I,E as Ge,G as Be,l as $e,ad as Ye,t as qe,c as p,a as e,I as U,e as O,d as k,M as _,N as q,K as n,aA as re,a7 as te,S as H,U as J,O as g,a6 as ce,J as me,aB as pe,a8 as ve,a9 as Fe,o as m,V as se,aC as We,L as He,P as fe,a4 as T,a3 as Je,ab as Qe}from"./index-CMVsiJL9.js";import{I as Xe}from"./icon-plus-BXC3-OCg.js";import{_ as Ze}from"./icon-pencil.vue_vue_type_script_setup_true_lang-pNE-cN8a.js";import{I as De,a as er}from"./icon-arrow-forward-B_H9JPt5.js";import{I as ge}from"./icon-x-C5nNggym.js";const V={async login(a,s){try{if(!a||!s)throw new Error("Email ve şifre zorunludur");if(!/^\S+@\S+\.\S+$/.test(a))throw new Error("Geçerli bir email adresi giriniz");const i=await Ue(ee,a,s),y=await W(C(z,"users",i.user.uid));if(y.exists()){const v=y.data();if(!v.isActive)throw new Error("Bu hesap devre dışı bırakılmış");const b=new Date().toISOString();return await ie(C(z,"users",i.user.uid),{lastLogin:b}),{...v,id:i.user.uid,lastLogin:b}}const d={id:i.user.uid,email:i.user.email,name:i.user.displayName||a.split("@")[0],role:"user",isActive:!0,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),phone:"",depot:null,avatar:"/assets/images/profile-2.jpeg",canEdit:!1};return await ne(C(z,"users",i.user.uid),d),d}catch(i){throw console.error("Login error:",i),i.code==="auth/user-not-found"?new Error("Kullanıcı bulunamadı"):i.code==="auth/wrong-password"?new Error("Hatalı şifre"):i.code==="auth/invalid-email"?new Error("Geçersiz email adresi"):i.code==="auth/user-disabled"?new Error("Bu hesap devre dışı bırakılmış"):i}},async logout(){await Me(ee)},async register(a){try{if(!a.email||!a.password)throw new Error("Email ve şifre zorunludur");if(!/^\S+@\S+\.\S+$/.test(a.email))throw new Error("Geçerli bir email adresi giriniz");if(a.password.length<6)throw new Error("Şifre en az 6 karakter olmalıdır");if(a.phone&&!/^[0-9\s-+()]*$/.test(a.phone))throw new Error("Geçerli bir telefon numarası giriniz");const s=await Pe(ee,a.email,a.password);if(a.name)try{await Ce(s.user,{displayName:a.name})}catch(d){console.error("Profile update error:",d)}const y={email:a.email,name:a.name||a.email.split("@")[0],role:a.role||"user",isActive:!0,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),phone:a.phone?String(a.phone):"",depot:a.depot||null,avatar:a.avatar||"/assets/images/profile-2.jpeg",canEdit:["admin","user","proje_admin"].includes(a.role||"user"),projectId:a.projectId||null,projectIds:a.projectIds||[]};try{await ne(C(z,"users",s.user.uid),y)}catch(d){throw console.error("Firestore save error:",d),await s.user.delete(),new Error("Kullanıcı kaydı tamamlanamadı")}return{id:s.user.uid,...y}}catch(s){throw console.error("Register error:",s),s.code==="auth/email-already-in-use"?new Error("Bu e-posta adresi zaten kullanımda"):s.code==="auth/weak-password"?new Error("Şifre en az 6 karakter olmalıdır"):s.code==="auth/invalid-email"?new Error("Geçersiz e-posta adresi"):s}},async getAllUsers(){try{const a=ue(z,"users"),s=await de(a),i=[];return s.empty||s.forEach(y=>{if(y.exists()){const d=y.data();i.push({id:y.id,email:d.email||"",name:d.name||"",role:d.role||"user",isActive:d.isActive!==void 0?d.isActive:!0,createdAt:d.createdAt||new Date().toISOString(),lastLogin:d.lastLogin||"",phone:d.phone||"",depot:d.depot||null,avatar:d.avatar||"/assets/images/profile-2.jpeg",canEdit:d.canEdit!==void 0?d.canEdit:!1,projectIds:d.projectIds||[]})}}),i}catch(a){return console.error("Get all users error:",a),[]}},async updateUser(a,s){try{const i=C(z,"users",a);if(!(await W(i)).exists())throw new Error("Kullanıcı bulunamadı");const d=new Date().toISOString(),v={updatedAt:d};if(s.name!==void 0&&(v.name=s.name),s.role!==void 0&&(v.role=s.role,v.canEdit=["admin","user","proje_admin"].includes(s.role)),typeof s.phone<"u"&&(v.phone=s.phone||""),typeof s.depot<"u"&&(v.depot=s.depot),s.avatar!==void 0&&(v.avatar=s.avatar),typeof s.isActive<"u"&&(v.isActive=s.isActive),s.projectIds!==void 0)try{if(Array.isArray(s.projectIds)){let c;try{c=JSON.parse(JSON.stringify(s.projectIds))}catch(S){console.error("projectIds JSON serileştirme hatası:",S),c=[]}const x=c.filter(S=>typeof S=="string"&&S.trim()!=="").map(S=>String(S).trim());v.projectIds=x.filter(S=>S!=="")}else v.projectIds=[]}catch(c){console.error("projectIds serileştirme hatası:",c),v.projectIds=[]}s.projectId!==void 0&&(typeof s.projectId=="string"||s.projectId===null?v.projectId=s.projectId:s.projectId?v.projectId=String(s.projectId):v.projectId=null),console.log("Güncellenecek veriler:",JSON.stringify(v));try{await ie(i,v)}catch(c){throw console.error("Firebase güncelleme hatası:",c),c.toString().includes("serializing")?new Error("Veriler serileştirilemedi: "+c.message):c}const u=(await W(i)).data();return{id:a,email:(u==null?void 0:u.email)||"",name:(u==null?void 0:u.name)||"",role:(u==null?void 0:u.role)||"user",isActive:(u==null?void 0:u.isActive)??!1,createdAt:(u==null?void 0:u.createdAt)||d,lastLogin:(u==null?void 0:u.lastLogin)||d,phone:(u==null?void 0:u.phone)||"",depot:(u==null?void 0:u.depot)||null,avatar:(u==null?void 0:u.avatar)||"/assets/images/profile-2.jpeg",canEdit:(u==null?void 0:u.canEdit)??!1,updatedAt:d,projectId:(u==null?void 0:u.projectId)||null,projectIds:Array.isArray(u==null?void 0:u.projectIds)?u.projectIds.filter(c=>typeof c=="string"):[]}}catch(i){throw console.error("Update user error:",i),i}},async deleteUser(a){try{return await Oe(C(z,"users",a)),!0}catch(s){throw console.error("Delete user error:",s),s}},async getUserById(a){const s=await W(C(z,"users",a));if(!s.exists())throw new Error("Kullanıcı bulunamadı");const i=s.data();return{id:a,email:i.email||"",name:i.name||"",role:i.role||"user",isActive:i.isActive||!1,createdAt:i.createdAt||new Date().toISOString(),lastLogin:i.lastLogin||new Date().toISOString(),phone:i.phone||"",depot:i.depot||null,avatar:i.avatar||"/assets/images/profile-2.jpeg",canEdit:i.canEdit||!1,projectId:i.projectId||null,projectIds:i.projectIds||[]}},async getUserByEmail(a){try{if(!a)return null;const s=Te(ue(z,"users"),Le("email","==",a),Ve(1)),i=await de(s);if(!i.empty){const y=i.docs[0];return{id:y.id,...y.data()}}return null}catch(s){return console.error("getUserByEmail error:",s),null}}},ye=Re("users",{state:()=>({users:[]}),actions:{async initializeStore(){try{const a=await V.getAllUsers();this.users=a.map(s=>({...s,role:s.role}))}catch(a){console.error("Kullanıcılar yüklenirken hata oluştu:",a),this.users=[]}},async resetToDefaults(){try{(await V.getAllUsers()).length===0&&(await V.register({email:"deneme@deneme.com",password:"deneme123",name:"Admin Kullanıcı",role:"admin"}),await this.initializeStore())}catch(a){console.error("Varsayılan kullanıcılar oluşturulurken hata:",a)}},async addUser(a){try{if(!a.email)return{success:!1,message:"Email adresi zorunludur"};if(!a.password)return{success:!1,message:"Şifre zorunludur"};const s=await V.register({email:a.email,password:a.password,name:a.name,role:a.role,phone:a.phone,depot:a.depot,avatar:a.avatar});return await this.initializeStore(),{success:!0,user:{...s,role:s.role}}}catch(s){return{success:!1,message:s.message||"Kullanıcı eklenirken hata oluştu"}}},async updateUser(a,s){try{const i=this.users.find(d=>d.email===a);if(!i)return{success:!1,message:"Kullanıcı bulunamadı"};const y=await V.updateUser(i.id,{name:s.name,role:s.role,phone:s.phone,depot:s.depot,avatar:s.avatar});return await this.initializeStore(),{success:!0,user:{...y,role:y.role}}}catch(i){return{success:!1,message:i.message||"Kullanıcı güncellenirken hata oluştu"}}},async deleteUser(a){try{const s=this.users.find(i=>i.email===a);return s?(await V.deleteUser(s.id),await this.$patch(i=>{i.users=[]}),!0):!1}catch(s){return console.error("Kullanıcı silinirken hata:",s),!1}},async updateLastLogin(a){return!0},verifyCredentials(a,s){return null},getUserByEmail(a){return this.users.find(s=>s.email===a)}},persist:!1}),rr={class:"pt-5"},tr={class:"panel mb-5"},sr={class:"flex items-center justify-between mb-5"},lr={class:"mb-5 flex flex-col sm:flex-row items-center justify-between gap-5"},ar={class:"flex items-center flex-1"},or={class:"flex flex-col sm:flex-row gap-5"},ir={class:"flex-1"},nr={class:"flex-1"},ur={class:"datatables"},dr={class:"table-responsive whitespace-nowrap"},cr={class:"table-striped table-hover"},mr={class:"flex items-center"},pr=["src"],vr={class:"whitespace-nowrap"},fr={class:"flex items-center justify-center gap-2"},gr=["onClick"],yr=["onClick","disabled","title"],hr={key:0},br={class:"flex justify-between items-center mt-5"},wr={class:"inline-flex items-center space-x-1 rtl:space-x-reverse"},kr=["disabled"],jr=["onClick"],Ar=["disabled"],xr={key:0,class:"fixed inset-0 bg-[black]/60 z-[999] flex items-center justify-center px-4"},Sr={class:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg"},Ir={class:"flex bg-[#fbfbfb] dark:bg-[#121c2c] items-center justify-between px-5 py-3"},_r={class:"font-bold text-lg"},Er={class:"p-5 overflow-y-auto max-h-[80vh]"},Kr={class:"mb-5"},zr=["disabled"],Ur={key:0,class:"text-danger"},Mr={class:"mb-5"},Pr={key:0,class:"text-danger"},Cr={class:"mb-5"},Or={key:0,class:"text-danger"},Tr={class:"mb-5"},Lr={for:"sifre"},Vr={key:0,class:"text-danger"},Rr=["required"],Nr={key:0,class:"text-danger"},Gr={class:"mb-5"},Br=["disabled"],$r={key:0,class:"text-danger"},Yr={class:"mb-5"},qr={class:"grid grid-cols-2 gap-2"},Fr=["id","value","disabled"],Wr=["for"],Hr={key:0,class:"mb-5"},Jr=["value"],Qr={key:0,class:"text-danger"},Xr={class:"mb-5"},Zr={class:"inline-flex"},Dr=["disabled"],et={class:"flex justify-end items-center mt-8 sticky bottom-0 bg-white dark:bg-gray-900 py-3 px-5 -mx-5 -mb-5 border-t border-gray-200 dark:border-gray-800"},rt={key:0,class:"fixed inset-0 bg-[black]/60 z-[999] flex items-center justify-center px-4"},tt={class:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg"},st={class:"flex bg-[#fbfbfb] dark:bg-[#121c2c] items-center justify-between px-5 py-3"},lt={class:"p-5"},at={class:"mb-5"},ot={class:"mb-4"},it={class:"flex justify-end items-center mt-8"},pt=Ne({__name:"kullanici-yonetimi",setup(a){const s=h(null),i=I(()=>{try{return Je()}catch(t){return console.warn("Rol servisi erişilemedi:",t),{isAdmin:()=>u.isAdmin,hasPermission:r=>(console.warn(`Rol servisi kullanılamıyor, ${r} izni için isAdmin kontrol ediliyor.`),u.isAdmin)}}}),y=I(()=>i.value.isAdmin()),d=I(()=>i.value.hasPermission(Qe.EDIT_USERS)||i.value.isAdmin());async function v(){try{const t=await Fe(()=>import("./index-CMVsiJL9.js").then(r=>r.aR),__vite__mapDeps([0,1]));return s.value=t.default,!0}catch(t){return console.error("projectService yüklenemedi, mock servis kullanılıyor",t),s.value={getProjects:async()=>[{id:"1",name:"Varsayılan Proje",description:"Mock proje",createdAt:new Date().toISOString(),isActive:!0}],getProjectById:async r=>({id:r,name:"Varsayılan Proje",description:"Mock proje",createdAt:new Date().toISOString(),isActive:!0})},!1}}Ge({title:"Kullanıcı Yönetimi"});const b=Be(),u=$e(),R=Ye(),c=h({}),x=h([]);function S(t){return{[T.ADMIN]:"Sistem Yöneticisi",[T.MANAGER]:"Yönetici",[T.TECHNICIAN]:"Teknisyen",[T.WAREHOUSE_MANAGER]:"Depo Sorumlusu",[T.USER]:"Kullanıcı",[T.GUEST]:"Misafir"}[t]||t}const he=I(()=>{if(y.value)return R.getWarehouses.filter(r=>r.isActive);const t=u.getAuthorizedDepot;return R.getWarehouses.filter(r=>r.code===t&&r.isActive)});I(()=>R.getWarehouses);const E=h(!1),be=h(""),N=h(""),G=h(""),M=h(1),Q=h(10),P=h(!1),L=h(!1),A=h(!1),B=h({email:"",id:"",canEdit:!0,password:"",name:"",role:"user",isActive:!0,lastLogin:"",avatar:"/assets/images/profile-34.jpeg",phone:""}),o=h({email:"",id:"",canEdit:!0,password:"",name:"",role:"user",isActive:!0,lastLogin:"",avatar:"/assets/images/profile-34.jpeg",phone:"",projectId:"",projectIds:[],depot:null}),$=h([]),le=h(!1),we=h(""),ke=async()=>{try{if(le.value=!0,await v(),!s.value||typeof s.value.getProjects!="function"){console.error("projectService tanımlı değil veya getProjects metodu mevcut değil"),$.value=[{id:"1",name:"Varsayılan Proje",description:"Otomatik oluşturulmuş proje",createdAt:new Date().toISOString(),isActive:!0}];return}const t=await s.value.getProjects();$.value=Array.isArray(t)&&t.length>0?t:[{id:"1",name:"Varsayılan Proje",description:"Otomatik oluşturulmuş proje",createdAt:new Date().toISOString(),isActive:!0}]}catch(t){console.error("Projeler yüklenirken bir hata oluştu:",t),we.value="Projeler yüklenirken bir hata oluştu.",$.value=[{id:"1",name:"Varsayılan Proje",description:"Otomatik oluşturulmuş proje",createdAt:new Date().toISOString(),isActive:!0}]}finally{le.value=!1}};I(()=>$.value.filter(t=>t.isActive&&!o.value.projectIds.includes(t.id))),I(()=>$.value.filter(t=>o.value.projectIds.includes(t.id)));const je=()=>{const t={};return c.value={},o.value.email?/\S+@\S+\.\S+/.test(o.value.email)||(t.email="Geçerli bir email adresi girin"):t.email="Email zorunludur",o.value.name||(t.name="Ad Soyad zorunludur"),o.value.phone||(t.phone="Telefon zorunludur"),!A.value&&!o.value.password&&(t.password="Şifre zorunludur"),o.value.role||(t.role="Kullanıcı tipi zorunludur"),c.value=t,Object.keys(t).length===0},X=h([]),F=async()=>{try{E.value=!0;const t=ye();(!t.users||t.users.length===0)&&(console.log("Kullanıcılar yükleniyor: Kullanıcı listesi boş, varsayılan kullanıcılar yükleniyor..."),t.resetToDefaults(),t.initializeStore());const r=await u.getAllUsers(),l=r.length>0?r:t.users;X.value=Array.isArray(l)?l:[]}catch(t){console.error("Kullanıcılar alınırken hata:",t),be.value="Kullanıcılar yüklenirken bir hata oluştu",X.value=[]}finally{E.value=!1}},K=I(()=>X.value),ae=I(()=>{if(!K.value||K.value.length===0)return[];try{let t=[...K.value];if(N.value){const w=N.value.toLowerCase();t=t.filter(f=>f.name&&f.name.toLowerCase().includes(w)||f.email.toLowerCase().includes(w))}G.value&&(t=t.filter(w=>w.role===G.value));const r=(M.value-1)*Q.value,l=r+Q.value;return t.slice(r,l)}catch(t){return console.error("kullanici-yonetimi: Filtrelemede hata oluştu",t),[]}}),Ae=async t=>{A.value=!0;const r=t,l=r.projectId||"",w=r.depot||null;let f=null,j=[],Y=[];try{t.id&&(f=(await u.getAllUsers()).find(ze=>ze.id===t.id),console.log("Firebase'den gelen güncel kullanıcı verileri:",f),j=await u.getUserProjects(t.id),console.log(`Firebase'den çekilen kullanıcı projeleri: ${j.length} adet`,j),f&&f.roles&&(Y=[...f.roles],console.log("Kullanıcı rolleri:",Y)))}catch(oe){console.error("Kullanıcı verileri güncellenirken hata:",oe)}j.length===0&&(f&&f.projectIds&&Array.isArray(f.projectIds)?j=[...f.projectIds]:r.projectIds&&Array.isArray(r.projectIds)?j=[...r.projectIds]:l&&(j=[l])),x.value=Y,console.log("Düzenleme için kullanıcının projeleri:",j),console.log("Düzenleme için kullanıcının rolleri:",x.value),o.value={email:t.email,id:t.id,canEdit:t.canEdit,password:"",name:t.name||"",role:t.role,isActive:t.isActive,lastLogin:t.lastLogin,avatar:t.avatar||"/assets/images/profile-34.jpeg",phone:t.phone||"",projectId:l,projectIds:j,depot:w},c.value={},P.value=!0},xe=async()=>{var t;if(je())try{if(E.value=!0,(o.value.role==="user"||o.value.role==="depo_sorumlusu")&&!o.value.depot){b.showMessage("Depo sorumlusu için depo seçimi zorunludur","error"),E.value=!1;return}if(s.value||await v()||b.showMessage("Proje servisi yüklenemedi, proje atamaları yapılamayabilir.","warning"),A.value){if(o.value.email==="deneme@deneme.com"){const f=await u.updateUser(o.value.email,{name:o.value.name,password:o.value.password||void 0});f.success?(b.showMessage("Admin kullanıcı bilgileri güncellendi","success"),P.value=!1):b.showMessage(f.message||"Kullanıcı güncellenirken bir hata oluştu","error"),E.value=!1;return}let r=[];try{const j=(await u.getAllUsers()).find(Y=>Y.id===o.value.id);j&&Array.isArray(j.projectIds)&&(r=[...j.projectIds])}catch(f){console.error("Güncelleme öncesi kullanıcı projeleri alınamadı:",f)}const l={name:o.value.name,role:o.value.role,isActive:o.value.isActive,phone:o.value.phone||"",projectIds:o.value.projectIds||[],roles:x.value};o.value.password&&(l.password=o.value.password),o.value.role==="user"||o.value.role==="depo_sorumlusu"?l.depot=o.value.depot:l.depot=null;const w=await u.updateUser(o.value.email,l);w.success?(console.log("Kullanıcı güncellendi, proje ilişkileri güncellenmedi"),b.showMessage("Kullanıcı başarıyla güncellendi","success"),P.value=!1,await F()):b.showMessage(w.message||"Kullanıcı güncellenirken bir hata oluştu","error")}else{const r={id:"",canEdit:!0,email:o.value.email,password:o.value.password||"",name:o.value.name,role:o.value.role,isActive:o.value.isActive,lastLogin:"",createdAt:new Date().toISOString(),avatar:"/assets/images/profile-34.jpeg",phone:o.value.phone||"",projectIds:o.value.projectIds||[],roles:x.value};(o.value.role==="user"||o.value.role==="depo_sorumlusu")&&(r.depot=o.value.depot),console.log("Kullanıcı ekleme işlemi başlatılıyor:",r.email);const l=await u.addUser(r);l.success?(console.log("Kullanıcı başarıyla eklendi:",(t=l.user)==null?void 0:t.id),b.showMessage("Kullanıcı başarıyla eklendi","success"),P.value=!1,await F()):b.showMessage(l.message||"Kullanıcı eklenirken bir hata oluştu","error")}E.value=!1}catch(r){console.error("Kullanıcı kaydedilirken hata:",r),b.showMessage("Kullanıcı kaydedilirken bir hata oluştu","error"),E.value=!1}},Se=()=>{y.value};qe(async()=>{try{await v(),Se();const t=ye();await ke(),await F(),await R.initializeStore(),(!t.users||t.users.length===0)&&(console.log("Kullanıcı listesi boş, store yeniden başlatılıyor..."),t.resetToDefaults(),t.initializeStore())}catch(t){console.error("Sayfa yüklenirken bir hata oluştu:",t),b.showMessage("Sayfa yüklenirken bir hata oluştu, lütfen sayfayı yenileyin","error")}});const Ie=()=>{A.value=!1,o.value={email:"",id:"",canEdit:!0,password:"",name:"",role:"user",isActive:!0,lastLogin:"",avatar:"/assets/images/profile-34.jpeg",phone:"",depot:null,projectId:"",projectIds:[]},x.value=[],c.value={},P.value=!0},_e=t=>{B.value=t,L.value=!0},Ee=async()=>{try{if(E.value=!0,B.value.email==="deneme@deneme.com"){b.showMessage("Admin kullanıcısı silinemez","error");return}const t=await u.deleteUser(B.value.email);t.success?(b.showMessage("Kullanıcı başarıyla silindi","success"),L.value=!1,await F()):b.showMessage(t.message||"Kullanıcı silinirken bir hata oluştu","error")}catch(t){console.error("Kullanıcı silinirken hata:",t),b.showMessage("Kullanıcı silinirken bir hata oluştu","error")}finally{E.value=!1,L.value=!1}},Z=I(()=>!K.value||K.value.length===0?1:Math.ceil(K.value.length/Q.value)),D=t=>{t<1||t>Z.value||(M.value=t)},Ke=t=>{switch(t){case"admin":return"Admin";case"user":return"Depo Sorumlusu";case"observer":return"Gözlemci";case"depo_sorumlusu":return"Depo Sorumlusu";case"proje_admin":return"Proje Yöneticisi";case"ariza_merkez":return"Arıza Merkezi";default:return t}};return h(null),(t,r)=>(m(),p("div",null,[r[34]||(r[34]=e("ul",{class:"flex space-x-2 rtl:space-x-reverse"},[e("li",null,[e("a",{href:"javascript:;",class:"text-primary hover:underline"},"Kullanıcılar")]),e("li",{class:"before:content-['/'] ltr:before:mr-2 rtl:before:ml-2"},[e("span",null,"Kullanıcı Yönetimi")])],-1)),e("div",rr,[e("div",tr,[e("div",sr,[r[17]||(r[17]=e("h5",{class:"font-semibold text-lg dark:text-white-light"},"Kullanıcı Yönetimi",-1)),e("div",null,[d.value?(m(),p("button",{key:0,type:"button",class:"btn btn-primary",onClick:Ie},[U(Xe,{class:"ltr:mr-2 rtl:ml-2"}),r[16]||(r[16]=O(" Yeni Kullanıcı Ekle "))])):k("",!0)])]),e("div",lr,[e("div",ar,[e("div",or,[e("div",ir,[_(e("input",{type:"text",placeholder:"Kullanıcı Ara...",class:"form-input","onUpdate:modelValue":r[0]||(r[0]=l=>re(N)?N.value=l:null)},null,512),[[q,n(N)]])]),e("div",nr,[_(e("select",{class:"form-select","onUpdate:modelValue":r[1]||(r[1]=l=>re(G)?G.value=l:null)},r[18]||(r[18]=[e("option",{value:""},"Tüm Kullanıcı Tipleri",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"user"},"Depo Sorumlusu",-1),e("option",{value:"observer"},"Depo İzleyicisi",-1)]),512),[[te,n(G)]])])])])]),e("div",ur,[e("div",dr,[e("table",cr,[r[20]||(r[20]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Kullanıcı Adı"),e("th",null,"Ad Soyad"),e("th",null,"Email"),e("th",null,"Kullanıcı Tipi"),e("th",null,"Durum"),e("th",null,"Son Giriş"),e("th",{class:"text-center"},"İşlemler")])],-1)),e("tbody",null,[(m(!0),p(H,null,J(ae.value,(l,w)=>(m(),p("tr",{key:w},[e("td",null,g(w+1),1),e("td",null,[e("div",mr,[e("img",{src:l.avatar||"/assets/images/profile-34.jpeg",class:"w-8 h-8 rounded-full object-cover ltr:mr-2 rtl:ml-2",alt:"avatar"},null,8,pr),e("span",vr,g(l.email.split("@")[0]),1)])]),e("td",null,g(l.name||l.email.split("@")[0]),1),e("td",null,g(l.email),1),e("td",null,[e("span",{class:se({"badge bg-primary":l.role==="admin","badge bg-success":l.role==="user"})},g(Ke(l.role||"")),3)]),e("td",null,[e("span",{class:se({"badge bg-success":l.isActive,"badge bg-danger":!l.isActive})},g(l.isActive?"Aktif":"Pasif"),3)]),e("td",null,g(l.lastLogin||"-"),1),e("td",null,[e("div",fr,[d.value?(m(),p("button",{key:0,type:"button",class:"btn btn-sm btn-outline-primary",onClick:f=>Ae(l)},[U(Ze)],8,gr)):k("",!0),d.value?(m(),p("button",{key:1,type:"button",class:"btn btn-sm btn-outline-danger",onClick:f=>_e(l),disabled:l.email==="deneme@deneme.com",title:l.email==="deneme@deneme.com"?"Admin kullanıcısı silinemez":""},[U(De)],8,yr)):k("",!0)])])]))),128)),ae.value.length===0?(m(),p("tr",hr,r[19]||(r[19]=[e("td",{colspan:"8",class:"text-center"},"Kullanıcı bulunamadı.",-1)]))):k("",!0)])])])]),e("div",br,[e("div",null,"Toplam: "+g(K.value&&Array.isArray(K.value)?K.value.length:0)+" kullanıcı",1),e("ul",wr,[e("li",null,[e("button",{type:"button",class:"flex justify-center px-3 py-2 font-semibold border border-gray-300 rounded-md text-sm leading-5 text-gray-700 bg-white hover:text-gray-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:text-gray-200",disabled:n(M)===1,onClick:r[2]||(r[2]=l=>D(n(M)-1))},[U(We,{class:"w-5 h-5"})],8,kr)]),(m(!0),p(H,null,J(Z.value,l=>(m(),p("li",{key:l},[e("button",{type:"button",class:se(["px-3 py-2 rounded-md",{"bg-primary text-white":n(M)===l,"text-gray-700 hover:text-gray-500 bg-white border border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:text-gray-200":n(M)!==l}]),onClick:w=>D(l)},g(l),11,jr)]))),128)),e("li",null,[e("button",{type:"button",class:"flex justify-center px-3 py-2 font-semibold border border-gray-300 rounded-md text-sm leading-5 text-gray-700 bg-white hover:text-gray-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:text-gray-200",disabled:n(M)===Z.value,onClick:r[3]||(r[3]=l=>D(n(M)+1))},[U(er,{class:"w-5 h-5"})],8,Ar)])])])])]),(m(),ce(ve,{to:"#app"},[U(pe,{name:"fade"},{default:me(()=>[n(P)?(m(),p("div",xr,[e("div",Sr,[e("div",Ir,[e("h5",_r,g(n(A)?"Kullanıcı Düzenle":"Yeni Kullanıcı Ekle"),1),e("button",{type:"button",class:"text-white-dark hover:text-dark",onClick:r[4]||(r[4]=l=>P.value=!1)},[U(ge)])]),e("div",Er,[e("form",{onSubmit:He(xe,["prevent"])},[e("div",Kr,[r[21]||(r[21]=e("label",{for:"email"},[O("Email "),e("span",{class:"text-danger"},"*")],-1)),_(e("input",{id:"email",type:"email",placeholder:"Email",class:"form-input","onUpdate:modelValue":r[5]||(r[5]=l=>n(o).email=l),required:"",disabled:n(A)&&n(o).email==="deneme@deneme.com"},null,8,zr),[[q,n(o).email]]),n(c).email?(m(),p("span",Ur,g(n(c).email),1)):k("",!0)]),e("div",Mr,[r[22]||(r[22]=e("label",{for:"name"},[O("Ad Soyad "),e("span",{class:"text-danger"},"*")],-1)),_(e("input",{id:"name",type:"text",placeholder:"Ad Soyad",class:"form-input","onUpdate:modelValue":r[6]||(r[6]=l=>n(o).name=l),required:""},null,512),[[q,n(o).name]]),n(c).name?(m(),p("span",Pr,g(n(c).name),1)):k("",!0)]),e("div",Cr,[r[23]||(r[23]=e("label",{for:"name"},[O("Telefon "),e("span",{class:"text-danger"},"*")],-1)),_(e("input",{id:"name",type:"text",placeholder:"Telefon",class:"form-input","onUpdate:modelValue":r[7]||(r[7]=l=>n(o).phone=l),required:""},null,512),[[q,n(o).phone]]),n(c).name?(m(),p("span",Or,g(n(c).name),1)):k("",!0)]),e("div",Tr,[e("label",Lr,[O(g(n(A)?"Şifre (Değiştirmek için doldurun)":"Şifre")+" ",1),n(A)?k("",!0):(m(),p("span",Vr,"*"))]),_(e("input",{id:"sifre",type:"password",placeholder:"Şifre",class:"form-input","onUpdate:modelValue":r[8]||(r[8]=l=>n(o).password=l),required:!n(A)},null,8,Rr),[[q,n(o).password]]),n(c).password?(m(),p("span",Nr,g(n(c).password),1)):k("",!0)]),e("div",Gr,[r[25]||(r[25]=e("label",{for:"role"},[O("Kullanıcı Tipi "),e("span",{class:"text-danger"},"*")],-1)),_(e("select",{id:"role",class:"form-select","onUpdate:modelValue":r[9]||(r[9]=l=>n(o).role=l),required:"",disabled:n(A)&&n(o).email==="deneme@deneme.com"},r[24]||(r[24]=[e("option",{value:"",disabled:""},"Seçiniz",-1),e("option",{value:"admin"},"Admin",-1),e("option",{value:"user"},"Depo Sorumlusu",-1),e("option",{value:"observer"},"Depo İzleyicisi",-1)]),8,Br),[[te,n(o).role]]),n(c).role?(m(),p("span",$r,g(n(c).role),1)):k("",!0)]),e("div",Yr,[r[26]||(r[26]=e("label",{class:"font-bold mb-2 block"},"Kullanıcı Rolleri",-1)),e("div",qr,[(m(!0),p(H,null,J(Object.values(n(T)),l=>(m(),p("div",{key:l,class:"flex items-center"},[_(e("input",{type:"checkbox",id:"role_"+l,value:l,"onUpdate:modelValue":r[10]||(r[10]=w=>re(x)?x.value=w:null),class:"form-checkbox",disabled:n(A)&&n(o).email==="deneme@deneme.com"},null,8,Fr),[[fe,n(x)]]),e("label",{for:"role_"+l,class:"ml-2"},g(S(l)),9,Wr)]))),128))]),r[27]||(r[27]=e("p",{class:"text-xs text-gray-500 mt-2"},' Not: Bu roller, kullanıcının sistem içindeki izinlerini belirler. Rol izinleri "Rol Test Sayfası"nda görüntülenebilir. ',-1))]),n(o).role==="user"?(m(),p("div",Hr,[r[29]||(r[29]=e("label",{for:"depot"},[O("Depo "),e("span",{class:"text-danger"},"*")],-1)),_(e("select",{id:"depot",class:"form-select","onUpdate:modelValue":r[11]||(r[11]=l=>n(o).depot=l),required:""},[r[28]||(r[28]=e("option",{value:""},"Depo Seçiniz",-1)),(m(!0),p(H,null,J(he.value,l=>(m(),p("option",{key:l.id,value:l.code},g(l.name)+" ("+g(l.code)+") ",9,Jr))),128))],512),[[te,n(o).depot]]),n(c).depot?(m(),p("span",Qr,g(n(c).depot),1)):k("",!0)])):k("",!0),e("div",Xr,[e("label",Zr,[_(e("input",{type:"checkbox",class:"form-checkbox","onUpdate:modelValue":r[12]||(r[12]=l=>n(o).isActive=l),disabled:n(A)&&n(o).email==="deneme@deneme.com"},null,8,Dr),[[fe,n(o).isActive]]),r[30]||(r[30]=e("span",null,"Aktif",-1))])]),e("div",et,[e("button",{type:"button",class:"btn btn-outline-danger ltr:mr-2 rtl:ml-2",onClick:r[13]||(r[13]=l=>P.value=!1)},"İptal"),r[31]||(r[31]=e("button",{type:"submit",class:"btn btn-primary"},"Kaydet",-1))])],32)])])])):k("",!0)]),_:1})])),(m(),ce(ve,{to:"#app"},[U(pe,{name:"fade"},{default:me(()=>[n(L)?(m(),p("div",rt,[e("div",tt,[e("div",st,[r[32]||(r[32]=e("h5",{class:"font-bold text-lg"},"Kullanıcı Sil",-1)),e("button",{type:"button",class:"text-white-dark hover:text-dark",onClick:r[14]||(r[14]=l=>L.value=!1)},[U(ge)])]),e("div",lt,[e("div",at,[e("p",ot,g(n(B).name||n(B).email)+" adlı kullanıcıyı silmek istediğinize emin misiniz?",1),r[33]||(r[33]=e("p",{class:"text-danger"},"Bu işlem geri alınamaz!",-1))]),e("div",it,[e("button",{type:"button",class:"btn btn-outline-dark ltr:mr-2 rtl:ml-2",onClick:r[15]||(r[15]=l=>L.value=!1)},"İptal"),e("button",{type:"button",class:"btn btn-danger",onClick:Ee},"Sil")])])])])):k("",!0)]),_:1})]))]))}});export{pt as default};
