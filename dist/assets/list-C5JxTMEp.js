import{d as J,u as X,r as i,e as I,w as O,a as Q,i as d,j as e,s as T,v as j,l as h,q as M,y as c,K as v,F as R,k as W,D as N,J as Z,T as $,C as n,a7 as B,an as ee}from"./index-d431Q8yB.js";import{_ as te}from"./icon-pencil.vue_vue_type_script_setup_true_lang-xfKVdPJ3.js";import{I as ae}from"./icon-trash-lines-ug_c1Xl1.js";import{I as se}from"./icon-plus-GW1fWUBD.js";import{I as E,a as le}from"./icon-info-triangle-DKMdkIao.js";const oe={class:"panel"},ne={class:"flex flex-col md:flex-row items-center justify-between mb-5"},re={class:"flex flex-col md:flex-row gap-4 w-full md:w-auto mt-4 md:mt-0"},ie={class:"flex items-center"},ue={class:"table-responsive"},de={class:"table-striped w-full bg-white dark:bg-black"},ce={key:0},ve={key:1},be={colspan:"3",class:"text-center p-4 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},me={class:"p-3 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},pe={class:"p-3 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},fe={class:"p-3 border-b border-[#e0e6ed] dark:border-[#1b2e4b]"},ge={class:"flex gap-2"},ye=["onClick"],he=["onClick"],ke={key:0,class:"flex justify-between items-center mt-5"},_e={class:"text-sm"},xe={class:"flex gap-2"},we=["disabled"],Ce=["disabled"],Ke={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},De={class:"panel bg-white dark:bg-gray-800 w-full max-w-md"},ze={class:"flex items-center justify-between mb-5"},Ie={class:"font-semibold text-lg"},Te={class:"mb-4"},je={key:0,class:"text-red-500 text-xs mt-1"},Me={class:"mb-4"},Ne={class:"flex justify-end gap-4"},$e=["disabled"],Se={key:1,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},Ve={class:"panel bg-white dark:bg-gray-800 w-full max-w-md p-6"},Be={class:"flex flex-col items-center mb-5"},Ee={class:"text-red-500 p-4"},Ae={class:"flex justify-center gap-4"},Le=["disabled"],Pe={key:0,class:"animate-spin mr-2"},Fe={class:"flex items-center gap-2"},Xe=J({__name:"list",setup(Ue){const k=X(),u=i(!1),x=i(!1),_=i(!1),K=i([]),b=i({}),w=i(""),o=i(1),f=i(5),C=i(!1),g=i(null),r=i({show:!1,message:"",type:"info"}),s=i({id:"",name:"",description:""}),y=I(()=>{if(!w.value)return K.value;const a=w.value.toLowerCase();return K.value.filter(t=>t.name.toLowerCase().includes(a)||t.description&&t.description.toLowerCase().includes(a))}),m=I(()=>Math.ceil(y.value.length/f.value)),S=I(()=>{const a=(o.value-1)*f.value,t=a+f.value;return y.value.slice(a,t)});O([y,f],()=>{o.value>m.value&&m.value>0&&(o.value=m.value),o.value<1&&m.value>0&&(o.value=1)}),Q(()=>{D()});const p=(a,t="info")=>{r.value.timeout&&clearTimeout(r.value.timeout),r.value={show:!0,message:a,type:t,timeout:setTimeout(()=>{V()},3e3)}},V=()=>{r.value.show=!1},A=()=>{o.value=1},D=async()=>{u.value=!0;try{K.value=k.getCategories.map(a=>({...a,description:a.description||""})),p("Kategoriler başarıyla yüklendi","success")}catch(a){console.error("Kategoriler yüklenirken hata oluştu:",a),p("Kategoriler yüklenirken hata oluştu","error")}finally{u.value=!1}},L=()=>{_.value=!1,s.value={id:"",name:"",description:""},b.value={},x.value=!0},P=a=>{_.value=!0,s.value={...a},b.value={},x.value=!0},z=()=>{x.value=!1,s.value={id:"",name:"",description:""},b.value={}},F=()=>{let a=!0;return b.value={},s.value.name.trim()||(b.value.name="Kategori adı zorunludur",a=!1),a},U=async()=>{if(F()){u.value=!0;try{_.value?(k.updateCategory(s.value.id,{name:s.value.name,description:s.value.description}),p(`"${s.value.name}" kategorisi güncellendi`,"success")):(k.addCategory({name:s.value.name,description:s.value.description}),p(`"${s.value.name}" kategorisi oluşturuldu`,"success")),D(),z()}catch(a){console.error("Kategori kaydedilirken hata oluştu:",a),p("Kategori kaydedilirken hata oluştu","error")}finally{u.value=!1}}},q=a=>{g.value=a,C.value=!0},Y=()=>{C.value=!1,g.value=null},G=async()=>{var a;if(g.value!==null){u.value=!0;try{const t=((a=k.getCategories.find(l=>l.id===g.value))==null?void 0:a.name)||"Bilinmeyen Kategori";k.deleteCategory(g.value),p(`"${t}" kategorisi silindi`,"success"),D(),C.value=!1,g.value=null}catch(t){console.error("Kategori silinirken hata oluştu:",t),p("Kategori silinirken hata oluştu","error")}finally{u.value=!1}}};return(a,t)=>(n(),d("div",null,[e("div",oe,[e("div",ne,[t[6]||(t[6]=e("h5",{class:"font-semibold text-lg dark:text-white-light"},"Kategoriler",-1)),e("div",re,[e("div",ie,[T(e("input",{type:"text",class:"form-input",placeholder:"Kategori ara...","onUpdate:modelValue":t[0]||(t[0]=l=>w.value=l),onInput:A},null,544),[[j,w.value]])]),e("button",{class:"btn btn-primary",onClick:L},[h(se,{class:"w-5 h-5 ltr:mr-2 rtl:ml-2"}),t[5]||(t[5]=M(" Yeni Kategori Ekle "))])])]),e("div",ue,[e("table",de,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",{class:"border-b border-[#e0e6ed] dark:border-[#1b2e4b] p-3 text-left"},"Kategori Adı"),e("th",{class:"border-b border-[#e0e6ed] dark:border-[#1b2e4b] p-3 text-left"},"Açıklama"),e("th",{class:"border-b border-[#e0e6ed] dark:border-[#1b2e4b] p-3 text-left"},"İşlemler")])],-1)),e("tbody",null,[u.value?(n(),d("tr",ce,t[7]||(t[7]=[e("td",{colspan:"3",class:"text-center"},[e("div",{class:"flex justify-center items-center p-4"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-2 border-primary border-l-transparent"})])],-1)]))):S.value.length===0?(n(),d("tr",ve,[e("td",be,c(y.value.length===0?"Henüz kategori bulunmamaktadır.":"Aramanızla eşleşen kategori bulunamadı."),1)])):v("",!0),(n(!0),d(R,null,W(S.value,l=>(n(),d("tr",{key:l.id,class:"hover:bg-[#f6f7f8] dark:hover:bg-[#1a222e]"},[e("td",me,c(l.name),1),e("td",pe,c(l.description),1),e("td",fe,[e("div",ge,[e("button",{class:"btn btn-sm btn-outline-primary",onClick:H=>P(l)},[h(te,{class:"w-4.5 h-4.5"})],8,ye),e("button",{class:"btn btn-sm btn-outline-danger",onClick:H=>q(l.id)},[h(ae,{class:"w-4.5 h-4.5"})],8,he)])])]))),128))])]),!u.value&&m.value>1?(n(),d("div",ke,[e("div",null,[e("span",_e,"Toplam "+c(y.value.length)+" kategoriden "+c((o.value-1)*f.value+1)+"-"+c(Math.min(o.value*f.value,y.value.length))+" arası gösteriliyor",1)]),e("div",xe,[e("button",{class:N(["btn btn-sm",o.value===1?"btn-gray":"btn-primary"]),disabled:o.value===1,onClick:t[1]||(t[1]=l=>o.value--)}," Önceki ",10,we),e("button",{class:N(["btn btn-sm",o.value===m.value?"btn-gray":"btn-primary"]),disabled:o.value===m.value,onClick:t[2]||(t[2]=l=>o.value++)}," Sonraki ",10,Ce)])])):v("",!0)])]),x.value?(n(),d("div",Ke,[e("div",De,[e("div",ze,[e("h5",Ie,c(_.value?"Kategori Düzenle":"Yeni Kategori Ekle"),1),e("button",{class:"text-gray-400 hover:text-gray-800",onClick:z},[h(B,{class:"w-5 h-5"})])]),e("form",{onSubmit:Z(U,["prevent"])},[e("div",Te,[t[9]||(t[9]=e("label",{for:"categoryName"},[M("Kategori Adı "),e("span",{class:"text-red-500"},"*")],-1)),T(e("input",{id:"categoryName",type:"text",class:"form-input","onUpdate:modelValue":t[3]||(t[3]=l=>s.value.name=l),required:""},null,512),[[j,s.value.name]]),b.value.name?(n(),d("p",je,c(b.value.name),1)):v("",!0)]),e("div",Me,[t[10]||(t[10]=e("label",{for:"categoryDescription"},"Açıklama",-1)),T(e("textarea",{id:"categoryDescription",class:"form-textarea",rows:"3","onUpdate:modelValue":t[4]||(t[4]=l=>s.value.description=l)},null,512),[[j,s.value.description]])]),e("div",Ne,[e("button",{type:"button",class:"btn btn-outline-danger",onClick:z}," İptal "),e("button",{type:"submit",class:"btn btn-primary",disabled:u.value},c(_.value?"Güncelle":"Ekle"),9,$e)])],32)])])):v("",!0),C.value?(n(),d("div",Se,[e("div",Ve,[e("div",Be,[e("div",Ee,[h(E,{class:"w-12 h-12"})]),t[11]||(t[11]=e("h5",{class:"font-semibold text-lg mb-2"},"Kategori Silme",-1)),t[12]||(t[12]=e("p",{class:"text-center"},"Bu kategoriyi silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.",-1))]),e("div",Ae,[e("button",{type:"button",class:"btn btn-outline-primary",onClick:Y}," İptal "),e("button",{type:"button",class:"btn btn-danger",onClick:G,disabled:u.value},[u.value?(n(),d("span",Pe,"↻")):v("",!0),t[13]||(t[13]=M(" Evet, Sil "))],8,Le)])])])):v("",!0),r.value.show?(n(),d("div",{key:2,class:N(["fixed top-4 right-4 p-4 rounded shadow-md z-50 transition-all duration-300",{"bg-green-500 text-white":r.value.type==="success","bg-red-500 text-white":r.value.type==="error","bg-blue-500 text-white":r.value.type==="info"}])},[e("div",Fe,[r.value.type==="success"?(n(),$(le,{key:0,class:"w-5 h-5"})):r.value.type==="error"?(n(),$(E,{key:1,class:"w-5 h-5"})):r.value.type==="info"?(n(),$(ee,{key:2,class:"w-5 h-5"})):v("",!0),e("span",null,c(r.value.message),1),e("button",{class:"ml-4 text-white hover:text-gray-200",onClick:V},[h(B,{class:"w-4 h-4"})])])],2)):v("",!0)]))}});export{Xe as default};
