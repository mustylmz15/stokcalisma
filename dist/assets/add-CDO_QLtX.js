import{d as I,z as L,ae as N,r as c,a as B,l as U,f as a,i as t,m as F,p as K,D as M,s as u,E as d,F as f,M as p,G as m,H as v,U as w,K as A,L as h,j as q,e as n}from"./index-C3vCaKLz.js";const D={class:"panel"},E={class:"flex items-center justify-between mb-5"},T={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},j={class:"mb-4"},G={key:0,class:"text-red-500 text-xs mt-1"},H={class:"mb-4"},R={key:0,class:"text-red-500 text-xs mt-1"},Y={class:"mb-4"},$=["value"],J={key:0,class:"text-red-500 text-xs mt-1"},O={class:"mb-4"},Q={key:0,class:"text-red-500 text-xs mt-1"},W={class:"mb-4"},X={class:"relative"},Z={key:0,class:"text-red-500 text-xs mt-1"},ee={class:"mb-4"},te={class:"mb-4 sm:col-span-2"},oe={class:"flex justify-end gap-4 mt-4"},se=["disabled"],ie={key:0,class:"animate-spin mr-2"},le={class:"flex items-center gap-2"},re=I({__name:"add",setup(ae){const P=L(),g=N(),o=c({code:"",name:"",categoryId:"",unit:"adet",unitPrice:0,minStockLevel:0,description:"",isActive:!0}),s=c({}),y=c(!1);c(!1);const r=c({show:!1,message:"",type:"info"}),k=c(g.getCategories),S=l=>g.getProducts.find(i=>i.code&&i.code.toLowerCase()===l.toLowerCase())===void 0,C=()=>{s.value={};let l=!0;return o.value.code.trim()?S(o.value.code)||(s.value.code="Bu ürün kodu zaten kullanılıyor",l=!1):(s.value.code="Ürün kodu zorunludur",l=!1),o.value.name.trim()||(s.value.name="Ürün adı zorunludur",l=!1),o.value.categoryId||(s.value.categoryId="Kategori seçmelisiniz",l=!1),o.value.unit||(s.value.unit="Birim seçmelisiniz",l=!1),o.value.unitPrice<=0&&(s.value.unitPrice="Birim fiyat 0'dan büyük olmalıdır",l=!1),l},V=()=>{o.value={code:"",name:"",categoryId:"",unit:"adet",unitPrice:0,minStockLevel:0,description:"",isActive:!0},s.value={},x("Form temizlendi","info")},x=(l,e="info")=>{r.value={show:!0,message:l,type:e},setTimeout(()=>{r.value.show=!1},3e3)},_=()=>{r.value.show=!1},z=async()=>{var l;if(C()){y.value=!0;try{const e=g.addProduct({...o.value,category:((l=k.value.find(b=>b.id===o.value.categoryId))==null?void 0:l.name)||""});x(`"${o.value.name}" ürünü başarıyla eklendi`,"success"),setTimeout(()=>{P.push("/inventory/products")},1500)}catch(e){console.error("Ürün eklenirken hata oluştu:",e),x("Ürün eklenirken bir hata oluştu","error")}finally{y.value=!1}}};return B(()=>{}),(l,e)=>{const b=U("router-link");return n(),a("div",null,[t("div",D,[t("div",E,[e[8]||(e[8]=t("h5",{class:"font-semibold text-lg dark:text-white-light"},"Yeni Ürün Ekle",-1)),F(b,{to:"/inventory/products",class:"btn btn-outline-primary"},{default:K(()=>e[7]||(e[7]=[t("i",{class:"las la-arrow-left"},null,-1),u(" Geri Dön ")])),_:1})]),t("form",{onSubmit:M(z,["prevent"])},[t("div",T,[t("div",j,[e[9]||(e[9]=t("label",{for:"productCode"},[u("Ürün Kodu "),t("span",{class:"text-red-500"},"*")],-1)),d(t("input",{id:"productCode",type:"text",class:p(["form-input",{"border-red-500":s.value.code}]),"onUpdate:modelValue":e[0]||(e[0]=i=>o.value.code=i),required:""},null,2),[[f,o.value.code]]),s.value.code?(n(),a("p",G,m(s.value.code),1)):v("",!0)]),t("div",H,[e[10]||(e[10]=t("label",{for:"productName"},[u("Ürün Adı "),t("span",{class:"text-red-500"},"*")],-1)),d(t("input",{id:"productName",type:"text",class:p(["form-input",{"border-red-500":s.value.name}]),"onUpdate:modelValue":e[1]||(e[1]=i=>o.value.name=i),required:""},null,2),[[f,o.value.name]]),s.value.name?(n(),a("p",R,m(s.value.name),1)):v("",!0)]),t("div",Y,[e[12]||(e[12]=t("label",{for:"category"},[u("Kategori "),t("span",{class:"text-red-500"},"*")],-1)),d(t("select",{id:"category",class:p(["form-select",{"border-red-500":s.value.categoryId}]),"onUpdate:modelValue":e[2]||(e[2]=i=>o.value.categoryId=i),required:""},[e[11]||(e[11]=t("option",{value:""},"Kategori Seçiniz",-1)),(n(!0),a(A,null,h(k.value,i=>(n(),a("option",{key:i.id,value:i.id},m(i.name),9,$))),128))],2),[[w,o.value.categoryId]]),s.value.categoryId?(n(),a("p",J,m(s.value.categoryId),1)):v("",!0)]),t("div",O,[e[14]||(e[14]=t("label",{for:"unit"},[u("Birim "),t("span",{class:"text-red-500"},"*")],-1)),d(t("select",{id:"unit",class:p(["form-select",{"border-red-500":s.value.unit}]),"onUpdate:modelValue":e[3]||(e[3]=i=>o.value.unit=i),required:""},e[13]||(e[13]=[q('<option value="adet">Adet</option><option value="kg">Kilogram</option><option value="lt">Litre</option><option value="mt">Metre</option><option value="kutu">Kutu</option><option value="paket">Paket</option>',6)]),2),[[w,o.value.unit]]),s.value.unit?(n(),a("p",Q,m(s.value.unit),1)):v("",!0)]),t("div",W,[e[16]||(e[16]=t("label",{for:"unitPrice"},[u("Birim Fiyat "),t("span",{class:"text-red-500"},"*")],-1)),t("div",X,[d(t("input",{id:"unitPrice",type:"number",step:"0.01",class:p(["form-input pl-8",{"border-red-500":s.value.unitPrice}]),"onUpdate:modelValue":e[4]||(e[4]=i=>o.value.unitPrice=i),required:""},null,2),[[f,o.value.unitPrice]]),e[15]||(e[15]=t("span",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"},"₺",-1))]),s.value.unitPrice?(n(),a("p",Z,m(s.value.unitPrice),1)):v("",!0)]),t("div",ee,[e[17]||(e[17]=t("label",{for:"minStockLevel"},"Minimum Stok Seviyesi",-1)),d(t("input",{id:"minStockLevel",type:"number",class:"form-input","onUpdate:modelValue":e[5]||(e[5]=i=>o.value.minStockLevel=i),min:"0"},null,512),[[f,o.value.minStockLevel]])]),t("div",te,[e[18]||(e[18]=t("label",{for:"description"},"Açıklama",-1)),d(t("textarea",{id:"description",class:"form-textarea",rows:"3","onUpdate:modelValue":e[6]||(e[6]=i=>o.value.description=i)},null,512),[[f,o.value.description]])])]),t("div",oe,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:V}," Formu Temizle "),t("button",{type:"submit",class:"btn btn-primary",disabled:y.value},[y.value?(n(),a("span",ie,"↻")):v("",!0),e[19]||(e[19]=u(" Ürün Ekle "))],8,se)])],32)]),r.value.show?(n(),a("div",{key:0,class:p(["fixed top-4 right-4 p-4 rounded shadow-md z-50 transition-all duration-300",{"bg-green-500 text-white":r.value.type==="success","bg-red-500 text-white":r.value.type==="error","bg-blue-500 text-white":r.value.type==="info"}])},[t("div",le,[t("span",null,m(r.value.message),1),t("button",{class:"ml-4 text-white hover:text-gray-200",onClick:_},e[20]||(e[20]=[t("i",{class:"las la-times"},null,-1)]))])],2)):v("",!0)])}}});export{re as default};
