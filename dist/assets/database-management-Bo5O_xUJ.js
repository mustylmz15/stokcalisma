import{u as C,r as o,c as n,a as t,b as g,d as c,e as h,f as z,g as f,h as V,i as _,j as B,o as r}from"./index-CMVsiJL9.js";const N={class:"panel"},T={class:"mb-5"},D={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},M={class:"panel bg-white dark:bg-gray-800 p-4"},L=["disabled"],E={key:0,class:"animate-spin mr-2"},j={key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"},A={class:"panel bg-white dark:bg-gray-800 max-w-md w-full"},H={class:"flex flex-col items-center p-4"},I={class:"flex gap-4"},S=["disabled"],Z={key:0,class:"animate-spin mr-2"},$={__name:"database-management",setup(P){const d=C(),m=o(!1),l=o(!1),i=o(!1),u=o([]),k=["products","stocks","movements","categories","serializedItems"],w=()=>{i.value=!0},y=async()=>{l.value=!0,u.value=[];try{for(const s of k){const e={collection:s,status:"başladı",count:0,error:null};u.value.push(e);try{const a=z(f,s),b=await V(a);if(b.empty){e.status="zaten boş";continue}const p=[];let v=0;b.forEach(x=>{p.push(_(B(f,s,x.id))),v++}),await Promise.all(p),e.status="tamamlandı",e.count=v}catch(a){e.status="hata",e.error=a.message,console.error(`${s} koleksiyonu temizlenirken hata:`,a)}}d.success("Veritabanı temizleme işlemi tamamlandı!"),i.value=!1}catch(s){console.error("Veritabanı temizleme sırasında hata oluştu:",s),d.error("Veritabanı temizleme işlemi sırasında bir hata oluştu!")}finally{l.value=!1}};return(s,e)=>(r(),n("div",N,[e[8]||(e[8]=t("div",{class:"flex items-center justify-between mb-5"},[t("h5",{class:"font-semibold text-lg dark:text-white-light"},"Veritabanı Yönetimi")],-1)),t("div",T,[e[5]||(e[5]=g('<div class="mb-5"><div class="flex flex-col md:flex-row gap-4"><div class="alert alert-danger bg-danger text-white p-3"><div class="flex items-start"><div class="ltr:mr-3 rtl:ml-3"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5"><path opacity="0.5" d="M5.31171 10.7615C8.23007 5.58716 9.68925 3 12 3C14.3107 3 15.7699 5.58716 18.6883 10.7615L19.0519 11.4063C21.4771 15.7061 22.6897 17.856 21.5937 19.428C20.4978 21 17.7864 21 12.3637 21H11.6363C6.21356 21 3.50217 21 2.40626 19.428C1.31034 17.856 2.52291 15.7061 4.94805 11.4063L5.31171 10.7615Z" stroke="currentColor" stroke-width="1.5"></path><path d="M12 8V13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><circle cx="12" cy="16" r="1" fill="currentColor"></circle></svg></div><div><h4 class="text-white font-semibold mb-2">Dikkat!</h4><p>Bu işlem tüm veritabanını temizleyecek ve veri kaybına neden olacaktır. İşlem geri alınamaz.</p></div></div></div></div></div>',1)),t("div",D,[t("div",M,[e[2]||(e[2]=t("h5",{class:"font-semibold mb-4"},"Veritabanını Temizle",-1)),e[3]||(e[3]=t("p",{class:"mb-4"},"Bu işlem aşağıdaki koleksiyonları temizleyecektir:",-1)),e[4]||(e[4]=t("ul",{class:"list-disc ml-4 mb-4"},[t("li",null,"Ürünler (products)"),t("li",null,"Stoklar (stocks)"),t("li",null,"Hareketler (movements)"),t("li",null,"Kategoriler (categories)"),t("li",null,"Seri Numaralı Ürünler (serializedItems)")],-1)),t("button",{type:"button",class:"btn btn-danger",onClick:w,disabled:m.value},[m.value?(r(),n("span",E,"↻")):c("",!0),e[1]||(e[1]=h(" Veritabanını Temizle "))],8,L)])])]),i.value?(r(),n("div",j,[t("div",A,[t("div",H,[e[7]||(e[7]=g('<svg width="50" height="50" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-danger mb-4"><path opacity="0.5" d="M5.31171 10.7615C8.23007 5.58716 9.68925 3 12 3C14.3107 3 15.7699 5.58716 18.6883 10.7615L19.0519 11.4063C21.4771 15.7061 22.6897 17.856 21.5937 19.428C20.4978 21 17.7864 21 12.3637 21H11.6363C6.21356 21 3.50217 21 2.40626 19.428C1.31034 17.856 2.52291 15.7061 4.94805 11.4063L5.31171 10.7615Z" stroke="currentColor" stroke-width="1.5"></path><path d="M12 8V13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><circle cx="12" cy="16" r="1" fill="currentColor"></circle></svg><h5 class="text-lg font-bold mb-2">Veritabanını Temizlemeyi Onaylayın</h5><p class="text-center mb-4">Bu işlem tüm verileri silecektir ve GERİ ALINAMAZ! Devam etmek istediğinize emin misiniz?</p>',3)),t("div",I,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:e[0]||(e[0]=a=>i.value=!1)}," İptal "),t("button",{type:"button",class:"btn btn-danger",onClick:y,disabled:l.value},[l.value?(r(),n("span",Z,"↻")):c("",!0),e[6]||(e[6]=h(" Evet, Veritabanını Temizle "))],8,S)])])])])):c("",!0)]))}};export{$ as default};
